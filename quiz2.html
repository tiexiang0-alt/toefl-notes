<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ä¹”æ²»è€å¸ˆçš„æ‰˜ç¦è¯­æ³•æŒ‘æˆ˜ Â· äº”å¤§å¥å‹ç¯‡</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@48,400,1,0"
        rel="stylesheet">
    <link
        href="https://fonts.googleapis.com/css2?family=Fredoka:wght@400;500;600&family=Noto+Sans+SC:wght@400;500;700&family=JetBrains+Mono:wght@500&display=swap"
        rel="stylesheet">

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Noto Sans SC', 'sans-serif'],
                        display: ['Fredoka', 'sans-serif'],
                        mono: ['JetBrains Mono', 'monospace'],
                    },
                    colors: {
                        primary: '#EC4899', // Pink for Lesson 2
                        secondary: '#4F46E5',
                    }
                }
            }
        }
    </script>

    <style>
        body {
            background-color: #FDFBF7;
            color: #1F2937;
            font-family: 'Noto Sans SC', sans-serif;
        }

        .n-code {
            font-family: 'JetBrains Mono', monospace;
            background: #F3F4F6;
            padding: 2px 6px;
            border-radius: 4px;
            color: #DC2626;
        }

        .option-card {
            transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .option-card:hover {
            transform: translateY(-2px);
            border-color: #EC4899;
            background-color: #FDF2F8;
        }

        .option-card.selected {
            background-color: #EC4899;
            color: white;
            border-color: #EC4899;
        }

        .option-card.correct {
            background-color: #10B981;
            color: white;
            border-color: #10B981;
        }

        .option-card.wrong {
            background-color: #EF4444;
            color: white;
            border-color: #EF4444;
        }
    </style>
</head>

<body class="min-h-screen flex flex-col">

    <nav class="p-6 flex justify-between items-center max-w-4xl mx-auto w-full">
        <a href="lesson2.html" class="flex items-center gap-2 text-gray-500 hover:text-primary transition font-bold">
            <span class="material-symbols-rounded">arrow_back</span>
            è¿”å›è¯¾ç¨‹
        </a>
        <div class="text-xs font-mono bg-pink-100 px-3 py-1 rounded-full text-pink-600">Sentence Patterns Quiz</div>
    </nav>

    <main class="flex-grow flex items-center justify-center p-4">
        <div class="max-w-2xl w-full">

            <!-- Start Screen -->
            <div id="start-screen"
                class="bg-white rounded-3xl p-8 md:p-12 shadow-xl border border-gray-100 text-center">
                <div
                    class="w-20 h-20 bg-pink-100 rounded-full flex items-center justify-center mx-auto mb-6 text-pink-600">
                    <span class="material-symbols-rounded text-4xl">swords</span>
                </div>
                <h1 class="text-4xl font-display font-bold mb-4 text-gray-800">äº”å¤§å¥å‹Â·å®æˆ˜æ¼”ç»ƒ</h1>
                <p class="text-gray-600 mb-8 text-lg">20é“çœŸé¢˜ï¼Œè¿™ä¹Ÿæ˜¯é€šå¾€â€œé•¿éš¾å¥åˆ†æâ€çš„å¿…ç»ä¹‹è·¯ã€‚</p>
                <button onclick="quizApp.start()"
                    class="bg-primary hover:bg-pink-600 text-white text-xl font-bold px-10 py-4 rounded-xl shadow-lg shadow-pink-200 transition transform hover:-translate-y-1">
                    å¼€å§‹æŒ‘æˆ˜
                </button>
            </div>

            <!-- Quiz Screen -->
            <div id="quiz-screen"
                class="hidden bg-white rounded-3xl p-8 md:p-10 shadow-xl border border-gray-100 relative overflow-hidden">
                <div class="absolute top-0 left-0 w-full h-2 bg-gray-100">
                    <div id="progress-bar" class="h-full bg-primary transition-all duration-300" style="width: 0%">
                    </div>
                </div>

                <div class="flex justify-between items-center mb-6 mt-2">
                    <span class="text-sm font-bold text-gray-400 uppercase tracking-widest">Question <span
                            id="q-current">1</span>/20</span>
                    <span id="score-display"
                        class="bg-pink-50 text-pink-600 px-3 py-1 rounded-lg text-sm font-bold">Score: 0</span>
                </div>

                <div id="question-container" class="mb-8">
                    <h3 id="question-text" class="text-2xl font-bold text-gray-800 leading-relaxed mb-6"></h3>
                    <div id="options-container" class="space-y-3"></div>
                </div>

                <div id="feedback-area" class="hidden mb-6 p-4 rounded-xl">
                    <p id="feedback-text" class="font-bold"></p>
                    <p id="explanation-text" class="text-sm mt-2 opacity-90"></p>
                </div>

                <div class="flex justify-end">
                    <button id="next-btn" onclick="quizApp.nextQuestion()"
                        class="hidden bg-black text-white px-8 py-3 rounded-xl font-bold hover:opacity-80 transition flex items-center gap-2">
                        ä¸‹ä¸€é¢˜ <span class="material-symbols-rounded">arrow_forward</span>
                    </button>
                </div>
            </div>

            <!-- Result Screen -->
            <div id="result-screen"
                class="hidden text-center bg-white rounded-3xl p-8 md:p-12 shadow-xl border border-gray-100">
                <div id="result-icon" class="text-6xl mb-4">ğŸ†</div>
                <h2 class="text-3xl font-display font-bold mb-2">æŒ‘æˆ˜å®Œæˆï¼</h2>
                <div class="text-5xl font-bold text-primary mb-2" id="final-score">0/100</div>
                <p class="text-gray-500 mb-8" id="result-message"></p>
                <div class="grid grid-cols-2 gap-4 mb-8">
                    <button onclick="location.reload()"
                        class="bg-gray-100 text-gray-700 font-bold py-3 rounded-xl hover:bg-gray-200 transition flex items-center justify-center gap-2">
                        <span class="material-symbols-rounded">refresh</span> å†è¯•ä¸€æ¬¡
                    </button>
                    <a href="lesson2.html"
                        class="bg-primary text-white font-bold py-3 rounded-xl hover:bg-pink-600 transition flex items-center justify-center gap-2">
                        <span class="material-symbols-rounded">school</span> å¤ä¹ è®²ä¹‰
                    </a>
                </div>
            </div>
        </div>
    </main>

    <script>
        const questions = [
            // SV (1-4)
            {
                q: "åˆ¤æ–­å¥å‹ï¼š<br><span class='n-code'>The sun rose.</span>",
                options: ["SV (ä¸»è°“)", "SVO (ä¸»è°“å®¾)", "SLP (ä¸»ç³»è¡¨)", "SVOO (ä¸»è°“å®¾å®¾)"],
                answer: 0,
                explanation: "Rise (rose) æ˜¯ä¸åŠç‰©åŠ¨è¯ï¼Œåé¢ä¸åŠ å®¾è¯­ã€‚"
            },
            {
                q: "åˆ¤æ–­å¥å‹ï¼š<br><span class='n-code'>You jump, I jump.</span> (Titanic)",
                options: ["SV (ä¸»è°“)", "SVO (ä¸»è°“å®¾)", "SLP (ä¸»ç³»è¡¨)"],
                answer: 0,
                explanation: "Jump æ˜¯ä¸åŠç‰©åŠ¨è¯ï¼Œè™½ç„¶æœ‰ 'into the water' ç­‰ä»‹è¯çŸ­è¯­ä¿®é¥°ï¼Œä½†æ ¸å¿ƒç»“æ„ä»æ˜¯ SVã€‚"
            },
            {
                q: "åˆ¤æ–­å¥å‹ï¼š<br><span class='n-code'>The accident happened yesterday.</span>",
                options: ["SV (ä¸»è°“)", "SVO (ä¸»è°“å®¾)", "SVOC (ä¸»è°“å®¾è¡¥)"],
                answer: 0,
                explanation: "Happen æ˜¯å…¸å‹çš„ä¸åŠç‰©åŠ¨è¯ã€‚Yesterday æ˜¯æ—¶é—´çŠ¶è¯­ã€‚"
            },
            {
                q: "é€‰è¯å¡«ç©ºï¼ˆä¸åŠç‰©åŠ¨è¯ï¼‰ï¼š<br>Many people ______ from the disease.",
                options: ["died", "killed"],
                answer: 0,
                explanation: "Die æ˜¯ä¸åŠç‰©åŠ¨è¯ï¼ŒåŠ  from æ¥åŸå› ï¼›Kill æ˜¯åŠç‰©åŠ¨è¯ï¼Œç›´æ¥æ¥äººã€‚"
            },

            // SVO (5-8)
            {
                q: "åˆ¤æ–­å¥å‹ï¼š<br><span class='n-code'>I love you.</span>",
                options: ["SV (ä¸»è°“)", "SVO (ä¸»è°“å®¾)", "SLP (ä¸»ç³»è¡¨)"],
                answer: 1,
                explanation: "Love æ˜¯åŠç‰©åŠ¨è¯ï¼ŒYou æ˜¯å®¾è¯­ã€‚"
            },
            {
                q: "åˆ¤æ–­å¥å‹ï¼š<br><span class='n-code'>He grabbed my bag.</span>",
                options: ["SVO (ä¸»è°“å®¾)", "SVOO (ä¸»è°“å®¾å®¾)", "SVOC (ä¸»è°“å®¾è¡¥)"],
                answer: 0,
                explanation: "Grabbed (è°“è¯­) + My bag (å®¾è¯­)ã€‚"
            },
            {
                q: "åˆ¤æ–­å¥å‹ï¼š<br><span class='n-code'>The dog bit me.</span>",
                options: ["SV", "SVO", "SLP"],
                answer: 1,
                explanation: "Bite (bit) æ˜¯åŠç‰©åŠ¨è¯ï¼ŒMe æ˜¯å®¾è¯­ã€‚"
            },
            {
                q: "åˆ¤æ–­å¥å‹ï¼š<br><span class='n-code'>George plans to run away.</span>",
                options: ["SV", "SVO", "SVOO"],
                answer: 1,
                explanation: "Plan (è°“è¯­) + to run away (ä¸å®šå¼çŸ­è¯­ä½œå®¾è¯­)ã€‚"
            },

            // SLP (9-12)
            {
                q: "åˆ¤æ–­å¥å‹ï¼š<br><span class='n-code'>King Kong is strong.</span>",
                options: ["SVO", "SLP (ä¸»ç³»è¡¨)", "SVOC"],
                answer: 1,
                explanation: "Is æ˜¯ç³»åŠ¨è¯ï¼ŒStrong æ˜¯å½¢å®¹è¯ä½œè¡¨è¯­ã€‚"
            },
            {
                q: "åˆ¤æ–­å¥å‹ï¼š<br><span class='n-code'>The apple pie tastes delicious.</span>",
                options: ["SVO", "SLP (ä¸»ç³»è¡¨)", "SVOO"],
                answer: 1,
                explanation: "Taste æ˜¯æ„Ÿå®˜ç³»åŠ¨è¯ï¼ŒDelicious æ˜¯è¡¨è¯­ã€‚"
            },
            {
                q: "åˆ¤æ–­å¥å‹ï¼š<br><span class='n-code'>He became handsome.</span>",
                options: ["SV", "SVO", "SLP"],
                answer: 2,
                explanation: "Become æ˜¯ç³»åŠ¨è¯(è¡¨ç¤ºå˜åŒ–)ã€‚"
            },
            {
                q: "ä¸‹åˆ—å“ªä¸ªåŠ¨è¯é€šå¸¸ä½œç³»åŠ¨è¯ï¼Ÿ",
                options: ["Run", "Feel", "Jump", "Kill"],
                answer: 1,
                explanation: "Feel (æ„Ÿè§‰/æ‘¸èµ·æ¥) æ˜¯å¸¸ç”¨çš„æ„Ÿå®˜ç³»åŠ¨è¯ã€‚"
            },

            // SVOO (13-16)
            {
                q: "åˆ¤æ–­å¥å‹ï¼š<br><span class='n-code'>Father told me a story.</span>",
                options: ["SVO", "SVOO (ä¸»è°“å®¾å®¾)", "SVOC"],
                answer: 1,
                explanation: "Told + Me (é—´å®¾) + A story (ç›´å®¾)ã€‚"
            },
            {
                q: "åˆ¤æ–­å¥å‹ï¼š<br><span class='n-code'>Give me your heart.</span>",
                options: ["SVO", "SVOO (ä¸»è°“å®¾å®¾)", "SVOC"],
                answer: 1,
                explanation: "Give + Me (é—´å®¾) + Your heart (ç›´å®¾)ã€‚"
            },
            {
                q: "å¥å­ <span class='n-code'>She bought him a gift</span> ä¸­ï¼ŒDirect Object (ç›´å®¾) æ˜¯ï¼Ÿ",
                options: ["She", "Bought", "Him", "A gift"],
                answer: 3,
                explanation: "A gift æ˜¯è¢«ä¹°çš„ä¸œè¥¿ï¼Œæ˜¯ç›´æ¥å®¾è¯­ã€‚"
            },
            {
                q: "SVOO ç»“æ„é€šå¸¸å¯ä»¥è½¬æ¢ä¸º SVO + ä»‹è¯ï¼Œä¾‹å¦‚ï¼š<br>Give me the book = Give the book ____ me.",
                options: ["to", "for", "with"],
                answer: 0,
                explanation: "Give sth TO sb."
            },

            // SVOC & Mix (17-20)
            {
                q: "åˆ¤æ–­å¥å‹ï¼š<br><span class='n-code'>You make my life happy.</span>",
                options: ["SVOO", "SVOC (ä¸»è°“å®¾è¡¥)", "SVO"],
                answer: 1,
                explanation: "Make + My life (å®¾è¯­) + Happy (å½¢å®¹è¯ä½œå®¾è¡¥ï¼Œä¿®é¥° life)ã€‚"
            },
            {
                q: "åˆ¤æ–­å¥å‹ï¼š<br><span class='n-code'>Father forced them to run.</span>",
                options: ["SVOO", "SVOC (ä¸»è°“å®¾è¡¥)", "SVO"],
                answer: 1,
                explanation: "Force + Them (å®¾è¯­) + To run (ä¸å®šå¼ä½œå®¾è¡¥)ã€‚"
            },
            {
                q: "è¾¨æï¼š<br>A: I found the book easy. (æˆ‘è§‰å¾—ä¹¦å¾ˆç®€å•)<br>B: I found the book easily. (æˆ‘å¾ˆå®¹æ˜“åœ°æ‰¾åˆ°äº†ä¹¦)<br>å“ªå¥æ˜¯ SVOCï¼Ÿ",
                options: ["A", "B"],
                answer: 0,
                explanation: "Aå¥ä¸­ Easy è¡¥è¶³è¯´æ˜ Book çš„æ€§è´¨ï¼Œæ˜¯ SVOCã€‚Bå¥ä¸­ Easily ä¿®é¥° Found åŠ¨ä½œï¼Œæ˜¯ SVO + çŠ¶è¯­ã€‚"
            },
            {
                q: "åˆ†æé•¿éš¾å¥æ ¸å¿ƒï¼š<br><span class='n-code'>Peisistratus strengthened the administration...</span>",
                options: ["SV", "SVO", "SLP"],
                answer: 1,
                explanation: "Strengthened (åŠ å¼º) æ˜¯åŠç‰©åŠ¨è¯ï¼ŒAdministration æ˜¯å®¾è¯­ï¼Œæ ¸å¿ƒä¸º SVOã€‚"
            }
        ];

        const quizApp = {
            currentIdx: 0,
            score: 0,
            isAnswering: false,
            init() { },
            start() {
                document.getElementById('start-screen').classList.add('hidden');
                document.getElementById('quiz-screen').classList.remove('hidden');
                this.loadQuestion(0);
            },
            loadQuestion(idx) {
                this.currentIdx = idx;
                this.isAnswering = true;
                const q = questions[idx];
                document.getElementById('q-current').textContent = idx + 1;
                document.getElementById('progress-bar').style.width = `${((idx) / questions.length) * 100}%`;
                document.getElementById('question-text').innerHTML = q.q;
                const optsContainer = document.getElementById('options-container');
                optsContainer.innerHTML = '';
                q.options.forEach((opt, i) => {
                    const btn = document.createElement('div');
                    btn.className = 'option-card border-2 border-gray-200 rounded-xl p-4 cursor-pointer font-medium text-gray-700';
                    btn.innerHTML = opt;
                    btn.onclick = () => this.handleAnswer(i, btn);
                    optsContainer.appendChild(btn);
                });
                document.getElementById('feedback-area').classList.add('hidden');
                document.getElementById('next-btn').classList.add('hidden');
            },
            handleAnswer(selectedIndex, btnElement) {
                if (!this.isAnswering) return;
                this.isAnswering = false;
                const q = questions[this.currentIdx];
                const isCorrect = selectedIndex === q.answer;
                const options = document.getElementById('options-container').children;
                if (isCorrect) {
                    btnElement.classList.add('correct');
                    this.score += 5;
                    document.getElementById('score-display').textContent = `Score: ${this.score}`;
                    confetti({ particleCount: 30, spread: 50, origin: { y: 0.7 }, colors: ['#EC4899', '#F472B6'] });
                } else {
                    btnElement.classList.add('wrong');
                    options[q.answer].classList.add('correct');
                }
                Array.from(options).forEach(el => el.classList.add('pointer-events-none'));
                const fbArea = document.getElementById('feedback-area');
                const fbText = document.getElementById('feedback-text');
                const expText = document.getElementById('explanation-text');
                fbArea.classList.remove('hidden');
                if (isCorrect) {
                    fbArea.className = 'mb-6 p-4 rounded-xl bg-green-50 text-green-800 border border-green-200';
                    fbText.innerHTML = '<span class="material-symbols-rounded align-middle mr-1">check_circle</span> Bingo! å›ç­”æ­£ç¡®';
                } else {
                    fbArea.className = 'mb-6 p-4 rounded-xl bg-red-50 text-red-800 border border-red-200';
                    fbText.innerHTML = '<span class="material-symbols-rounded align-middle mr-1">cancel</span> Oops! å›ç­”é”™è¯¯';
                }
                expText.textContent = q.explanation;
                document.getElementById('next-btn').classList.remove('hidden');
            },
            nextQuestion() {
                if (this.currentIdx < questions.length - 1) {
                    this.loadQuestion(this.currentIdx + 1);
                } else {
                    this.showResults();
                }
            },
            showResults() {
                document.getElementById('quiz-screen').classList.add('hidden');
                document.getElementById('result-screen').classList.remove('hidden');
                document.getElementById('final-score').textContent = this.score + '/100';
                let msg = "";
                if (this.score === 100) msg = "å®Œç¾ï¼åŸºæœ¬çš„äº”å¤§å¥å‹ä½ å·²ç»å®Œå…¨æŒæ¡äº†ï¼ğŸ‰";
                else if (this.score >= 80) msg = "éå¸¸æ£’ï¼ä½†æœ‰äº›ç»†èŠ‚è¿˜éœ€è¦æ³¨æ„å“¦ï¼âœ¨";
                else if (this.score >= 60) msg = "é€šè¿‡äº†ï¼å»ºè®®å¤ä¹ ä¸€ä¸‹æ˜“é”™ç‚¹ã€‚ğŸ’ª";
                else msg = "è¿˜éœ€è¦åŠ æ²¹å“¦ï¼Œå»ºè®®é‡å¬ä¸€éè¯¾ç¨‹ï¼ğŸ“š";
                document.getElementById('result-message').textContent = msg;
                if (this.score === 100) confetti({ particleCount: 200, spread: 100, origin: { y: 0.6 } });
            }
        };
    </script>
</body>

</html>