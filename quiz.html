<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ä¹”æ²»è€å¸ˆçš„æ‰˜ç¦è¯­æ³•æŒ‘æˆ˜ Â· 20é¢˜é—¯å…³</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@48,400,1,0"
        rel="stylesheet">
    <link
        href="https://fonts.googleapis.com/css2?family=Fredoka:wght@400;500;600&family=Noto+Sans+SC:wght@400;500;700&family=JetBrains+Mono:wght@500&display=swap"
        rel="stylesheet">

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Noto Sans SC', 'sans-serif'],
                        display: ['Fredoka', 'sans-serif'],
                        mono: ['JetBrains Mono', 'monospace'],
                    },
                    colors: {
                        cream: '#FDFBF7',
                        paper: '#FFFFFF',
                        primary: '#4F46E5',
                        accent: '#F59E0B',
                        ink: '#1F2937',
                    }
                }
            }
        }
    </script>

    <style>
        body {
            background-color: #FDFBF7;
            color: #1F2937;
            font-family: 'Noto Sans SC', sans-serif;
        }

        .n-code {
            font-family: 'JetBrains Mono', monospace;
            background: #F3F4F6;
            padding: 2px 6px;
            border-radius: 4px;
            color: #DC2626;
        }

        .option-card {
            transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .option-card:hover {
            transform: translateY(-2px);
            border-color: #4F46E5;
            background-color: #EEF2FF;
        }

        .option-card.selected {
            background-color: #4F46E5;
            color: white;
            border-color: #4F46E5;
        }

        .option-card.correct {
            background-color: #10B981;
            color: white;
            border-color: #10B981;
        }

        .option-card.wrong {
            background-color: #EF4444;
            color: white;
            border-color: #EF4444;
        }
    </style>
</head>

<body class="min-h-screen flex flex-col">

    <!-- Top Navigation -->
    <nav class="p-6 flex justify-between items-center max-w-4xl mx-auto w-full">
        <a href="index.html" class="flex items-center gap-2 text-gray-500 hover:text-primary transition font-bold">
            <span class="material-symbols-rounded">arrow_back</span>
            è¿”å›è¯¾ç¨‹
        </a>
        <div class="text-xs font-mono bg-gray-200 px-3 py-1 rounded-full text-gray-600">Grammar Quiz 1.0</div>
    </nav>

    <main class="flex-grow flex items-center justify-center p-4">
        <div class="max-w-2xl w-full">

            <!-- Start Screen -->
            <div id="start-screen" class="bg-white rounded-3xl p-8 md:p-12 shadow-xl border border-gray-100 text-center"
                data-aos="zoom-in">
                <div
                    class="w-20 h-20 bg-indigo-100 rounded-full flex items-center justify-center mx-auto mb-6 text-indigo-600">
                    <span class="material-symbols-rounded text-4xl">psychology</span>
                </div>
                <h1 class="text-4xl font-display font-bold mb-4 text-gray-800">éšå ‚å¤§é—¯å…³</h1>
                <p class="text-gray-600 mb-6 text-lg">20é“ç²¾é€‰é¢˜ç›®ï¼Œæ£€éªŒä½ å¯¹â€œå¥å­æˆåˆ†â€çš„æŒæ¡ç¨‹åº¦ã€‚</p>

                <div class="mb-8 max-w-sm mx-auto">
                    <label for="student-name" class="block text-left text-sm font-bold text-gray-700 mb-2">Student Name
                        (Required)</label>
                    <input type="text" id="student-name" placeholder="Enter your name (e.g., George)"
                        class="w-full px-4 py-3 rounded-xl border border-gray-300 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 outline-none transition-all text-gray-800 font-bold text-center text-lg">
                </div>

                <div class="grid grid-cols-2 gap-4 text-left mb-8 max-w-sm mx-auto bg-gray-50 p-6 rounded-xl">
                    <div class="flex items-center gap-2 text-sm text-gray-600">
                        <span class="material-symbols-rounded text-green-500">check_circle</span> 20 Questions
                    </div>
                    <div class="flex items-center gap-2 text-sm text-gray-600">
                        <span class="material-symbols-rounded text-blue-500">timer</span> Unlimited Time
                    </div>
                    <div class="flex items-center gap-2 text-sm text-gray-600">
                        <span class="material-symbols-rounded text-orange-500">emoji_events</span> Instant Feedback
                    </div>
                    <div class="flex items-center gap-2 text-sm text-gray-600">
                        <span class="material-symbols-rounded text-purple-500">school</span> Level: Beginner
                    </div>
                </div>

                <button onclick="quizApp.start()"
                    class="bg-primary hover:bg-indigo-600 text-white text-xl font-bold px-10 py-4 rounded-xl shadow-lg shadow-indigo-200 transition transform hover:-translate-y-1 w-full max-w-xs">
                    å¼€å§‹æŒ‘æˆ˜
                </button>
            </div>

            <!-- Quiz Screen -->
            <div id="quiz-screen"
                class="hidden bg-white rounded-3xl p-8 md:p-10 shadow-xl border border-gray-100 relative overflow-hidden">
                <!-- Progress Bar -->
                <div class="absolute top-0 left-0 w-full h-2 bg-gray-100">
                    <div id="progress-bar" class="h-full bg-primary transition-all duration-300" style="width: 0%">
                    </div>
                </div>

                <div class="flex justify-between items-center mb-6 mt-2">
                    <span class="text-sm font-bold text-gray-400 uppercase tracking-widest">Question <span
                            id="q-current">1</span>/20</span>
                    <span id="score-display"
                        class="bg-indigo-50 text-indigo-600 px-3 py-1 rounded-lg text-sm font-bold">Score: 0</span>
                </div>

                <div id="question-container" class="mb-8">
                    <h3 id="question-text" class="text-2xl font-bold text-gray-800 leading-relaxed mb-6">Question text
                        goes here?</h3>
                    <div id="options-container" class="space-y-3">
                        <!-- Options injected by JS -->
                    </div>
                </div>

                <!-- Feedback Area -->
                <div id="feedback-area" class="hidden mb-6 p-4 rounded-xl">
                    <p id="feedback-text" class="font-bold"></p>
                    <p id="explanation-text" class="text-sm mt-2 opacity-90"></p>
                </div>

                <div class="flex justify-end">
                    <button id="next-btn" onclick="quizApp.nextQuestion()"
                        class="hidden bg-black text-white px-8 py-3 rounded-xl font-bold hover:opacity-80 transition flex items-center gap-2">
                        ä¸‹ä¸€é¢˜ <span class="material-symbols-rounded">arrow_forward</span>
                    </button>
                </div>
            </div>

            <!-- Result Screen -->
            <div id="result-screen"
                class="hidden text-center bg-white rounded-3xl p-8 md:p-12 shadow-xl border border-gray-100">
                <div id="result-icon" class="text-6xl mb-4">ğŸ†</div>
                <h2 class="text-3xl font-display font-bold mb-2">æŒ‘æˆ˜å®Œæˆï¼</h2>
                <div class="text-5xl font-bold text-primary mb-2" id="final-score">0/100</div>
                <p class="text-gray-500 mb-8" id="result-message">Perfect score!</p>

                <div class="grid grid-cols-2 gap-4 mb-8">
                    <button onclick="location.reload()"
                        class="bg-gray-100 text-gray-700 font-bold py-3 rounded-xl hover:bg-gray-200 transition flex items-center justify-center gap-2">
                        <span class="material-symbols-rounded">refresh</span> å†è¯•ä¸€æ¬¡
                    </button>
                    <a href="index.html"
                        class="bg-primary text-white font-bold py-3 rounded-xl hover:bg-indigo-600 transition flex items-center justify-center gap-2">
                        <span class="material-symbols-rounded">school</span> å¤ä¹ è®²ä¹‰
                    </a>
                </div>
            </div>

        </div>
    </main>

    <footer class="p-6 text-center text-gray-400 text-sm">
        &copy; 2025 George Teacher TOEFL Series.
    </footer>

    <script>
        AOS.init();

        const questions = [
            // 1-3 Subject
            {
                q: "æ‰¾å‡ºå¥å­ä¸­çš„ä¸»è¯­ï¼š<br><span class='n-code'>Speaking English</span> is useful.",
                options: ["Speaking", "English", "Speaking English", "is"],
                answer: 2,
                explanation: "åŠ¨åè¯çŸ­è¯­ 'Speaking English' æ•´ä½“ä½œä¸ºä¸»è¯­ã€‚"
            },
            {
                q: "æ‰¾å‡ºå¥å­ä¸­çš„ä¸»è¯­ï¼š<br>To see is to believe.",
                options: ["To see", "is", "To believe", "see"],
                answer: 0,
                explanation: "ä¸å®šå¼ 'To see' ä½œä¸»è¯­ã€‚"
            },
            {
                q: "è¿™æ˜¯ä¸€ä¸ªå®Œæ•´çš„å¥å­å—ï¼Ÿ<br><span class='n-code'>Always wants to eat pizza.</span>",
                options: ["æ˜¯ (Complete)", "å¦ (Fragment)"],
                answer: 1,
                explanation: "ç¼ºå°‘ä¸»è¯­ï¼ˆè°æƒ³è¦åƒï¼Ÿï¼‰ã€‚"
            },

            // 4-6 Predicate
            {
                q: "æ‰¾å‡ºå¥å­ä¸­çš„è°“è¯­ï¼š<br>He <span class='n-code'>might have been</span> late.",
                options: ["might", "have", "been", "might have been"],
                answer: 3,
                explanation: "è°“è¯­åŒ…å«æƒ…æ€åŠ¨è¯ã€åŠ©åŠ¨è¯å’Œç³»åŠ¨è¯æ•´ä½“ã€‚"
            },
            {
                q: "æ‰¾å‡ºå¥å­ä¸­çš„è°“è¯­ï¼š<br>George enjoys playing basketball.",
                options: ["George", "enjoys", "playing", "basketball"],
                answer: 1,
                explanation: "'enjoys' æ˜¯æ ¸å¿ƒåŠ¨è¯ï¼ˆè°“è¯­ï¼‰ã€‚'playing' æ˜¯åŠ¨åè¯ä½œå®¾è¯­ã€‚"
            },
            {
                q: "è¿™æ˜¯ä¸€ä¸ªå®Œæ•´çš„å¥å­å—ï¼Ÿ<br><span class='n-code'>The girl sitting by the window.</span>",
                options: ["æ˜¯ (Complete)", "å¦ (Fragment)"],
                answer: 1,
                explanation: "ç¼ºå°‘è°“è¯­ã€‚'sitting' åªæ˜¯åˆ†è¯ä¿®é¥° 'girl'ï¼Œæ²¡æœ‰çœŸåŠ¨è¯ï¼ˆå¦‚ is sittingï¼‰ã€‚"
            },

            // 7-9 Object
            {
                q: "æ‰¾å‡ºå¥å­ä¸­çš„å®¾è¯­ï¼š<br>I want <span class='n-code'>to go home</span>.",
                options: ["I", "want", "to go home", "home"],
                answer: 2,
                explanation: "ä¸å®šå¼çŸ­è¯­ 'to go home' æ•´ä½“ä½œä¸º 'want' çš„å®¾è¯­ã€‚"
            },
            {
                q: "åœ¨å¥å­ <span class='n-code'>She gave me a book</span> ä¸­ï¼Œ'me' æ˜¯ä»€ä¹ˆï¼Ÿ",
                options: ["ç›´æ¥å®¾è¯­ (Direct Object)", "é—´æ¥å®¾è¯­ (Indirect Object)", "ä¸»è¯­ (Subject)", "è¡¨è¯­ (Predicative)"],
                answer: 1,
                explanation: "Me æ˜¯æ¥å—è€…ï¼ˆäººï¼‰ï¼Œæ˜¯é—´æ¥å®¾è¯­ã€‚Book æ˜¯è¢«ç»™çš„ç‰©ï¼Œæ˜¯ç›´æ¥å®¾è¯­ã€‚"
            },
            {
                q: "æ‰¾å‡ºå¥å­ä¸­çš„ç›´æ¥å®¾è¯­ï¼š<br>He bought his mother a gift.",
                options: ["He", "bought", "mother", "gift"],
                answer: 3,
                explanation: "Gift æ˜¯è¢«ä¹°çš„ä¸œè¥¿ï¼ˆç›´æ¥å®¾è¯­ï¼‰ï¼ŒMother æ˜¯å—ç›Šè€…ï¼ˆé—´æ¥å®¾è¯­ï¼‰ã€‚"
            },

            // 10-12 Predicative (Link Verb)
            {
                q: "å¥å­ <span class='n-code'>The soup tastes good</span> ä¸­çš„ 'tastes' æ˜¯ä»€ä¹ˆåŠ¨è¯ï¼Ÿ",
                options: ["è¡Œä¸ºåŠ¨è¯ (Action Verb)", "ç³»åŠ¨è¯ (Link Verb)", "åŠ©åŠ¨è¯ (Auxiliary Verb)"],
                answer: 1,
                explanation: "Sense verbs (æ„Ÿå®˜åŠ¨è¯) å¦‚ taste, look, smell é€šå¸¸æ˜¯ç³»åŠ¨è¯ï¼Œè¿æ¥è¡¨è¯­ã€‚"
            },
            {
                q: "é€‰è¯å¡«ç©ºï¼š<br>The music sounds _______.",
                options: ["beautifully", "beautiful"],
                answer: 1,
                explanation: "ç³»åŠ¨è¯ sounds åé¢æ¥å½¢å®¹è¯ (Adjective) ä½œè¡¨è¯­ï¼Œè€Œä¸æ˜¯å‰¯è¯ã€‚"
            },
            {
                q: "æ‰¾å‡ºå¥å­ä¸­çš„è¡¨è¯­ï¼š<br>My dream is to become a doctor.",
                options: ["My dream", "is", "to become a doctor", "doctor"],
                answer: 2,
                explanation: "ç³»åŠ¨è¯ is åé¢çš„ä¸å®šå¼çŸ­è¯­è¯´æ˜äº†ä¸»è¯­çš„å†…å®¹ï¼Œæ˜¯è¡¨è¯­ã€‚"
            },

            // 13-16 Modifiers (Att/Adv)
            {
                q: "å¥å­ <span class='n-code'>The <b>sleeping</b> baby is cute</span> ä¸­ï¼Œboldéƒ¨åˆ†æ˜¯ï¼Ÿ",
                options: ["è°“è¯­ (Predicate)", "å®šè¯­ (Attribute)", "çŠ¶è¯­ (Adverbial)", "è¡¥è¯­ (Complement)"],
                answer: 1,
                explanation: "ä¿®é¥°åè¯ babyï¼Œæ˜¯å®šè¯­ã€‚"
            },
            {
                q: "å¥å­ <span class='n-code'>I saw him <b>yesterday</b></span> ä¸­ï¼Œboldéƒ¨åˆ†æ˜¯ï¼Ÿ",
                options: ["å®šè¯­ (Attribute)", "çŠ¶è¯­ (Adverbial)", "å®¾è¯­ (Object)"],
                answer: 1,
                explanation: "ä¿®é¥°åŠ¨è¯ saw (æ—¶é—´)ï¼Œæ˜¯çŠ¶è¯­ã€‚"
            },
            {
                q: "å¥å­ <span class='n-code'>The book <b>on the desk</b> is mine</span> ä¸­ï¼Œboldéƒ¨åˆ†æ˜¯ï¼Ÿ",
                options: ["å®šè¯­ (Attribute)", "çŠ¶è¯­ (Adverbial)"],
                answer: 0,
                explanation: "ä¿®é¥°åè¯ bookï¼Œè¡¨æ˜æ˜¯å“ªä¸€æœ¬ä¹¦ï¼Œæ˜¯å®šè¯­ï¼ˆåç½®å®šè¯­ï¼‰ã€‚"
            },
            {
                q: "å¥å­ <span class='n-code'>He runs <b>fast</b></span> ä¸­ï¼Œboldéƒ¨åˆ†æ˜¯ï¼Ÿ",
                options: ["å½¢å®¹è¯ (Adjective)", "å‰¯è¯ (Adverb)"],
                answer: 1,
                explanation: "ä¿®é¥°åŠ¨è¯ runsï¼Œæ˜¯å‰¯è¯ä½œçŠ¶è¯­ã€‚"
            },

            // 17-18 Complement
            {
                q: "å¥å­ <span class='n-code'>We keep the room clean</span> ä¸­ï¼Œ'clean' æ˜¯ä»€ä¹ˆï¼Ÿ",
                options: ["å®¾è¯­ (Object)", "å®šè¯­ (Attribute)", "å®¾è¯­è¡¥è¶³è¯­ (Object Complement)", "è°“è¯­ (Predicate)"],
                answer: 2,
                explanation: "Clean è¡¥å……è¯´æ˜å®¾è¯­ room çš„çŠ¶æ€ï¼ˆroom is cleanï¼‰ï¼Œæ˜¯å®¾è¡¥ã€‚"
            },
            {
                q: "å¥å­ <span class='n-code'>He asked me to leave</span> ä¸­ï¼Œ'to leave' æ˜¯ä»€ä¹ˆï¼Ÿ",
                options: ["ç›´æ¥å®¾è¯­", "çŠ¶è¯­", "å®¾è¯­è¡¥è¶³è¯­", "ä¸»è¯­"],
                answer: 2,
                explanation: "To leave è¡¥å……è¯´æ˜å®¾è¯­ me çš„åŠ¨è¯ï¼ˆme leaveï¼‰ï¼Œæ˜¯å®¾è¡¥ã€‚"
            },

            // 19-20 Advanced / Mix
            {
                q: "åˆ†æç»“æ„ï¼š<br><span class='n-code'>What he needs is to relax.</span>",
                options: ["ä¸»è¯­ä»å¥ + ç³»åŠ¨è¯ + è¡¨è¯­", "å®¾è¯­ä»å¥ + è°“è¯­ + å®¾è¯­", "å®šè¯­ä»å¥ + è°“è¯­ + çŠ¶è¯­"],
                answer: 0,
                explanation: "'What he needs' æ˜¯ä¸»è¯­ä»å¥ï¼Œ'is' æ˜¯ç³»åŠ¨è¯ï¼Œ'to relax' æ˜¯è¡¨è¯­ã€‚"
            },
            {
                q: "ä¸‹åˆ—å“ªä¸ªå¥å­ç»“æ„æ˜¯æ­£ç¡®çš„ï¼Ÿ",
                options: ["I very like it.", "I like it very much.", "I very much like it."],
                answer: 1,
                explanation: "Very much æ˜¯ç¨‹åº¦çŠ¶è¯­ï¼Œé€šå¸¸æ”¾åœ¨å¥æœ«ä¿®é¥°åŠ¨è¯ã€‚"
            }
        ];

        const quizApp = {
            currentIdx: 0,
            score: 0,
            isAnswering: false,
            studentName: '',
            wrongAnswers: [],

            init() {
                // Preload anything if needed
            },

            start() {
                const nameInput = document.getElementById('student-name');
                const name = nameInput.value.trim();

                if (!name) {
                    alert('Please enter your name to start! è¯·è¾“å…¥å§“åå¼€å§‹æµ‹è¯•ã€‚');
                    nameInput.focus();
                    nameInput.parentElement.classList.add('animate-pulse');
                    setTimeout(() => nameInput.parentElement.classList.remove('animate-pulse'), 1000);
                    return;
                }

                this.studentName = name;
                document.getElementById('start-screen').classList.add('hidden');
                document.getElementById('quiz-screen').classList.remove('hidden');
                this.loadQuestion(0);
            },

            loadQuestion(idx) {
                this.currentIdx = idx;
                this.isAnswering = true;
                const q = questions[idx];

                // Update UI
                document.getElementById('q-current').textContent = idx + 1;
                document.getElementById('progress-bar').style.width = `${((idx) / questions.length) * 100}%`;

                document.getElementById('question-text').innerHTML = q.q;

                const optsContainer = document.getElementById('options-container');
                optsContainer.innerHTML = '';

                q.options.forEach((opt, i) => {
                    const btn = document.createElement('div');
                    btn.className = 'option-card border-2 border-gray-200 rounded-xl p-4 cursor-pointer font-medium text-gray-700';
                    btn.textContent = opt;
                    if (opt.includes('(')) {
                        // Formatting optimization for options like "Yes (Complete)"
                        // keeping text simple for now
                    }
                    btn.onclick = () => this.handleAnswer(i, btn);
                    optsContainer.appendChild(btn);
                });

                // Reset feedback
                document.getElementById('feedback-area').classList.add('hidden');
                document.getElementById('next-btn').classList.add('hidden');
            },

            handleAnswer(selectedIndex, btnElement) {
                if (!this.isAnswering) return;
                this.isAnswering = false;

                const q = questions[this.currentIdx];
                const isCorrect = selectedIndex === q.answer;
                const options = document.getElementById('options-container').children;

                // Visual Feedback
                if (isCorrect) {
                    btnElement.classList.add('correct');
                    this.score += 5; // 20 * 5 = 100
                    document.getElementById('score-display').textContent = `Score: ${this.score}`;

                    // Simple confetti
                    confetti({
                        particleCount: 50,
                        spread: 60,
                        origin: { y: 0.6 },
                        colors: ['#10B981', '#34D399']
                    });
                } else {
                    btnElement.classList.add('wrong');
                    // Highlight correct answer
                    options[q.answer].classList.add('correct');

                    // Record wrong answer
                    this.wrongAnswers.push({
                        id: q.q.replace(/<[^>]*>?/gm, '').substring(0, 30) + '...', // Cleaner summary
                        studentAnswer: q.options[selectedIndex],
                        correctAnswer: q.options[q.answer]
                    });
                }

                // Make other options unclickable style
                Array.from(options).forEach(el => el.classList.add('pointer-events-none'));

                // Show Explanation
                const fbArea = document.getElementById('feedback-area');
                const fbText = document.getElementById('feedback-text');
                const expText = document.getElementById('explanation-text');

                fbArea.classList.remove('hidden');
                if (isCorrect) {
                    fbArea.className = 'mb-6 p-4 rounded-xl bg-green-50 text-green-800 border border-green-200';
                    fbText.innerHTML = '<span class="material-symbols-rounded align-middle mr-1">check_circle</span> å›ç­”æ­£ç¡®ï¼Correct!';
                } else {
                    fbArea.className = 'mb-6 p-4 rounded-xl bg-red-50 text-red-800 border border-red-200';
                    fbText.innerHTML = '<span class="material-symbols-rounded align-middle mr-1">cancel</span> å›ç­”é”™è¯¯ Oops!';
                }
                expText.textContent = q.explanation;

                // Show Next Button
                document.getElementById('next-btn').classList.remove('hidden');
            },

            nextQuestion() {
                if (this.currentIdx < questions.length - 1) {
                    this.loadQuestion(this.currentIdx + 1);
                } else {
                    this.showResults();
                }
            },

            showResults() {
                document.getElementById('quiz-screen').classList.add('hidden');
                document.getElementById('result-screen').classList.remove('hidden');

                // Submit data
                this.submitResults();

                const finalScore = this.score;
                document.getElementById('final-score').textContent = finalScore + '/100';

                let msg = "";
                let icon = "";

                if (finalScore === 100) {
                    msg = "å¤ªæ£’äº†ï¼ä½ æ˜¯è¯­æ³•å¤§å¸ˆï¼ğŸ‰";
                    icon = "ğŸ†";
                    confetti({ particleCount: 200, spread: 100, origin: { y: 0.6 } });
                } else if (finalScore >= 80) {
                    msg = "åšå¾—å¾ˆå¥½ï¼ç»§ç»­ä¿æŒï¼âœ¨";
                    icon = "ğŸ¥ˆ";
                } else if (finalScore >= 60) {
                    msg = "åŠæ ¼å•¦ï¼å†æ¥å†å‰ï¼ğŸ’ª";
                    icon = "ğŸ¥‰";
                } else {
                    msg = "åˆ«ç°å¿ƒï¼Œå»ºè®®å¤ä¹ ä¸€ä¸‹è®²ä¹‰å“¦ï¼ğŸ“š";
                    icon = "ğŸ’¡";
                }

                document.getElementById('result-message').textContent = msg;
                document.getElementById('result-icon').textContent = icon;
            },

            submitResults() {
                // Formsubmit.co Endpoint - REPLACE EMAIL HERE
                const endpoint = "https://formsubmit.co/ajax/tiexiang0@gmail.com";

                const data = {
                    _subject: `New Quiz Submission: ${this.studentName} - Score: ${this.score}`,
                    name: this.studentName,
                    score: `${this.score}/100`,
                    date: new Date().toLocaleString(),
                    wrong_answers: this.wrongAnswers.length > 0 ? JSON.stringify(this.wrongAnswers, null, 2) : "None! Perfect Score!"
                };

                fetch(endpoint, {
                    method: "POST",
                    headers: {
                        'Content-Type': 'application/json',
                        'Accept': 'application/json'
                    },
                    body: JSON.stringify(data)
                })
                    .then(response => response.json())
                    .then(data => {
                        console.log('Success:', data);
                        // Add success indicator to UI
                        const resultScreen = document.getElementById('result-screen');
                        const successMsg = document.createElement('p');
                        successMsg.className = "text-green-500 text-sm mt-4 font-bold bg-green-50 py-2 px-4 rounded-full inline-block";
                        successMsg.innerHTML = `<span class="material-symbols-rounded align-middle text-sm">cloud_done</span> Results sent to Teacher!`;
                        document.getElementById('final-score').after(successMsg);
                    })
                    .catch((error) => {
                        console.error('Error:', error);
                        // Silently fail or show simple msg, learning doesn't stop
                    });
            }
        };
    </script>
</body>

</html>