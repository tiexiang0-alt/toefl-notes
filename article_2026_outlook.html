<!DOCTYPE html>
<html lang="en" class="scroll-smooth">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>TOEFL Reading: The World in 2026</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link
        href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700&family=Playfair+Display:ital,wght@0,400;0,700;1,400&display=swap"
        rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@48,400,1,0"
        rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Outfit', 'sans-serif'],
                        serif: ['Playfair Display', 'serif'],
                    },
                    colors: {
                        deep: {
                            space: '#0B1120',
                            card: 'rgba(255, 255, 255, 0.08)',
                        },
                        vocab: 'rgba(139, 92, 246, 0.3)',
                        logic: 'rgba(249, 115, 22, 0.5)',
                        correct: 'rgba(34, 197, 94, 0.5)',
                        accent: '#8B5CF6',
                    }
                }
            }
        }
    </script>

    <style>
        :root {
            /* Glassmorphism v2 - Deep Space TOEFL Theme */
            --bg-canvas: #0B1120;
            --bg-card-l2: rgba(255, 255, 255, 0.08);
            --bg-card-l3: rgba(255, 255, 255, 0.15);
            --glass-border: rgba(255, 255, 255, 0.12);
            --glass-highlight: rgba(255, 255, 255, 0.2);
            --text-primary: #F1F5F9;
            --text-secondary: rgba(241, 245, 249, 0.7);
            --vocab-violet: rgba(139, 92, 246, 0.4);
            --logic-orange: rgba(249, 115, 22, 0.5);
            --correct-emerald: rgba(34, 197, 94, 0.5);
            --neon-purple: #A78BFA;
            --neon-orange: #FB923C;
        }

        /* L1: Deep Space Canvas with Mesh Gradient */
        body {
            font-family: 'Outfit', sans-serif;
            background-color: var(--bg-canvas);
            color: var(--text-primary);
            overflow-x: hidden;
            /* Prevent horizontal scroll globally */
            /* Prevent horizontal scroll globally */

            background-image: radial-gradient(at 0% 0%, rgba(139, 92, 246, 0.15) 0, transparent 50%),
                radial-gradient(at 100% 0%, rgba(249, 115, 22, 0.1) 0, transparent 50%),
                radial-gradient(at 50% 100%, rgba(34, 197, 94, 0.08) 0, transparent 50%),
                radial-gradient(at 100% 100%, rgba(6, 182, 212, 0.1) 0, transparent 50%);
            background-size: 200% 200%;
            animation: deep-space-pulse 25s ease infinite;
            min-height: 100vh;
        }

        @keyframes deep-space-pulse {

            0%,
            100% {
                background-position: 0% 50%;
            }

            50% {
                background-position: 100% 50%;
            }
        }

        /* L2: Main Content Glass Card */
        .glass-panel {
            background: var(--bg-card-l2);
            backdrop-filter: blur(16px) saturate(180%);
            -webkit-backdrop-filter: blur(16px) saturate(180%);
            border: 1px solid var(--glass-border);
            border-radius: 20px;
            box-shadow:
                0 8px 32px rgba(0, 0, 0, 0.4),
                inset 0 0 0 1px var(--glass-highlight);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .glass-panel:hover {
            transform: translateY(-4px) scale(1.01);
            box-shadow:
                0 12px 40px rgba(0, 0, 0, 0.5),
                0 0 30px rgba(139, 92, 246, 0.1),
                inset 0 0 0 1px var(--glass-highlight);
        }

        /* L3: Interactive Popup Layer */
        .glass-popup {
            background: var(--bg-card-l3);
            backdrop-filter: blur(24px) saturate(200%);
            -webkit-backdrop-filter: blur(24px) saturate(200%);
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow:
                0 12px 48px rgba(0, 0, 0, 0.5),
                0 0 0 1px rgba(255, 255, 255, 0.1),
                0 0 40px rgba(139, 92, 246, 0.2);
        }

        /* ===== TOEFL FEATURE 1: Logic Signposts with Neon Stroke ===== */
        .logic-word {
            display: inline-block;
            padding: 2px 8px;
            margin: 0 2px;
            border-radius: 6px;
            border: 1.5px solid var(--neon-orange);
            background: rgba(249, 115, 22, 0.15);
            color: var(--neon-orange);
            font-weight: 500;
            text-shadow: 0 0 8px rgba(249, 115, 22, 0.5);
            animation: neon-pulse 2s ease-in-out infinite;
        }

        @keyframes neon-pulse {

            0%,
            100% {
                box-shadow: 0 0 5px rgba(249, 115, 22, 0.3);
            }

            50% {
                box-shadow: 0 0 15px rgba(249, 115, 22, 0.6), 0 0 30px rgba(249, 115, 22, 0.3);
            }
        }

        /* ===== TOEFL FEATURE 2: Sentence Crusher - Clean Selection ===== */
        .sentence-span {
            cursor: pointer;
            transition: all 0.2s ease;
            border-bottom: 1px solid transparent;
        }

        .sentence-span:hover {
            background: rgba(139, 92, 246, 0.1);
        }

        .sentence-span.active {
            background: rgba(139, 92, 246, 0.15);
            border-bottom: 2px solid rgba(139, 92, 246, 0.5);
        }

        /* Grammar Highlighting in Sentence Crusher */
        .grammar-subject {
            background: rgba(96, 165, 250, 0.25);
            border-radius: 4px;
            padding: 1px 4px;
            border-bottom: 2px solid #60A5FA;
        }

        .grammar-verb {
            background: rgba(251, 191, 36, 0.25);
            border-radius: 4px;
            padding: 1px 4px;
            border-bottom: 2px solid #FBBF24;
        }

        .grammar-object {
            background: rgba(52, 211, 153, 0.25);
            border-radius: 4px;
            padding: 1px 4px;
            border-bottom: 2px solid #34D399;
        }

        .grammar-clause {
            border: 1px dashed rgba(255, 255, 255, 0.3);
            border-radius: 4px;
            padding: 2px 4px;
            background: rgba(255, 255, 255, 0.05);
        }

        /* ===== TOEFL FEATURE 3: Vocab Hover Cards with Prism Border ===== */
        .vocab-highlight {
            display: inline-block;
            background: var(--vocab-violet);
            padding: 1px 6px;
            border-radius: 4px;
            cursor: help;
            border-bottom: 2px dotted var(--neon-purple);
            transition: all 0.2s ease;
        }

        .vocab-highlight:hover {
            background: rgba(139, 92, 246, 0.5);
            box-shadow: 0 0 15px rgba(139, 92, 246, 0.4);
        }

        .vocab-card {
            position: absolute;
            z-index: 100;
            min-width: 280px;
            padding: 16px;
            border-radius: 16px;
            background: rgba(15, 23, 42, 0.95);
            backdrop-filter: blur(20px);
            border: 2px solid transparent;
            background-clip: padding-box;
            box-shadow:
                0 20px 40px rgba(0, 0, 0, 0.5),
                0 0 0 2px transparent;
            /* Prism Border Effect */
            background-image:
                linear-gradient(rgba(15, 23, 42, 0.95), rgba(15, 23, 42, 0.95)),
                linear-gradient(135deg, #8B5CF6, #06B6D4, #22C55E, #F59E0B, #EF4444);
            background-origin: padding-box, border-box;
            background-clip: padding-box, border-box;
            animation: prism-shimmer 3s ease infinite;
        }

        @keyframes prism-shimmer {

            0%,
            100% {
                filter: hue-rotate(0deg);
            }

            50% {
                filter: hue-rotate(30deg);
            }
        }

        /* ===== TOEFL FEATURE 4: Reading Progress HUD ===== */
        .reading-hud {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
            background: rgba(11, 17, 32, 0.9);
            backdrop-filter: blur(16px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 16px;
            padding: 16px 20px;
            min-width: 180px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
        }

        .progress-bar-container {
            height: 8px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 4px;
            overflow: hidden;
            margin-top: 8px;
        }

        .progress-bar-fill {
            height: 100%;
            background: linear-gradient(90deg, #22C55E, #FBBF24, #EF4444);
            background-size: 200% 100%;
            border-radius: 4px;
            transition: width 0.3s ease;
        }

        /* ===== TOEFL FEATURE 5: Summary Bento Grid ===== */
        .bento-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 12px;
        }

        .bento-item {
            background: var(--bg-card-l2);
            backdrop-filter: blur(12px);
            border: 1px solid var(--glass-border);
            border-radius: 12px;
            padding: 16px;
            cursor: grab;
            transition: all 0.3s ease;
        }

        .bento-item:hover {
            transform: scale(1.03);
            border-color: var(--neon-purple);
            box-shadow: 0 0 20px rgba(139, 92, 246, 0.2);
        }

        .bento-item.selected {
            border-color: var(--correct-emerald);
            background: rgba(34, 197, 94, 0.15);
            box-shadow: 0 0 25px rgba(34, 197, 94, 0.3);
        }

        /* ===== Enhanced Animations ===== */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes glow-breathe {

            0%,
            100% {
                opacity: 0.5;
            }

            50% {
                opacity: 1;
            }
        }

        .animate-fadeInUp {
            animation: fadeInUp 0.6s ease-out forwards;
        }

        /* Image effects for dark theme */
        .topic-image {
            position: relative;
            overflow: hidden;
            border-radius: 16px;
        }

        .topic-image::after {
            content: '';
            position: absolute;
            inset: 0;
            background: linear-gradient(to top, var(--bg-canvas) 0%, transparent 50%);
            pointer-events: none;
        }

        /* Scrollbar for dark theme */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.05);
        }

        ::-webkit-scrollbar-thumb {
            background: rgba(139, 92, 246, 0.4);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: rgba(139, 92, 246, 0.6);
        }

        /* Text selection */
        ::selection {
            background: rgba(139, 92, 246, 0.4);
            color: white;
        }

        /* Header styling for dark theme */
        .header-glass {
            background: rgba(11, 17, 32, 0.8);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        /* ===== MOBILE RESPONSIVE STYLES ===== */
        @media (max-width: 768px) {

            /* Hide Reading HUD on mobile - show simplified version */
            .reading-hud {
                top: auto;
                bottom: 70px;
                right: 10px;
                left: 10px;
                min-width: auto;
                padding: 10px 14px;
                border-radius: 12px;
            }

            /* Simplified header for mobile */
            .header-glass {
                height: 56px;
                margin: 8px;
                padding: 0 12px;
                border-radius: 16px;
            }

            .header-glass h1 {
                font-size: 14px;
            }

            /* Hide secondary nav items on mobile */
            .header-glass .hidden-mobile {
                display: none;
            }

            /* Stack main content vertically */
            main {
                flex-direction: column !important;
                padding: 8px !important;
                gap: 8px !important;
            }

            /* Mobile Reset for Stability */
            *,
            *:before,
            *:after {
                box-sizing: border-box !important;
                min-width: 0;
                /* Flexbox overflow fix */
            }

            /* Full width article panel - add space at bottom for audio button */
            main>div:first-child {
                border-radius: 20px !important;
                padding-bottom: 100px !important;
            }

            /* Safe Card Containers */
            .glass-panel {
                max-width: 100% !important;
                overflow-x: hidden;
            }

            /* Article Container Fixes */
            article.prose {
                padding: 16px 20px !important;
                /* Reduced mobile padding */
                width: 100% !important;
                max-width: 100% !important;
                overflow-wrap: break-word !important;
                word-wrap: break-word !important;
            }

            /* Text content fixes */
            .sentence-span {
                white-space: normal !important;
                /* Ensure text wraps */
                display: inline !important;
            }

            /* HIDE the analysis panel sidebar completely on mobile */
            #analysis-panel {
                display: none !important;
            }

            /* Audio bar - simplified for mobile */
            #article-audio-bar {
                padding: 10px 12px !important;
            }

            #article-audio-bar .max-w-4xl {
                gap: 10px !important;
            }

            /* Mobile drag handle for bottom sheet */
            .mobile-drag-handle {
                display: block;
                width: 40px;
                height: 4px;
                background: rgba(255, 255, 255, 0.3);
                border-radius: 2px;
                margin: 12px auto;
            }

            /* Hero section adjustments */
            .topic-image {
                height: 180px !important;
            }

            .topic-image h1 {
                font-size: 1.75rem !important;
            }

            /* Smaller article padding */
            article {
                padding: 16px !important;
            }

            /* Legend - horizontal scroll on mobile */
            .glass-popup {
                overflow-x: auto;
                flex-wrap: nowrap !important;
                padding: 12px !important;
                gap: 8px !important;
            }

            /* Sentence spans - larger touch targets */
            .sentence-span {
                padding: 8px 10px;
                margin: 4px 0;
                line-height: 1.8;
            }

            /* Section headers - not sticky on mobile */
            .topic-section h2 {
                position: relative !important;
                font-size: 1.25rem !important;
            }

            /* Topic images smaller on mobile */
            .topic-section img {
                height: 160px !important;
            }

            /* Widget grid - single column */
            [id^="widgets-"] {
                grid-template-columns: 1fr !important;
            }

            /* Glass panels - less hover effect on touch */
            .glass-panel:hover {
                transform: none;
            }

            /* Typography adjustments */
            p {
                font-size: 1rem !important;
                line-height: 1.75 !important;
            }

            /* Analysis panel cards - compact */
            #analysis-content>div {
                padding: 12px !important;
            }

            /* Audio bar - fixed at bottom */
            #analysis-content>div:last-child {
                position: sticky;
                bottom: 0;
            }
        }

        /* Extra small screens */
        @media (max-width: 480px) {
            .reading-hud {
                display: none;
            }

            .header-glass h1 {
                font-size: 12px;
            }

            .header-glass>div:last-child {
                display: none;
            }

            article {
                padding: 12px !important;
            }

            .sentence-span {
                font-size: 15px;
            }
        }

        /* Tablet landscape */
        @media (min-width: 769px) and (max-width: 1024px) {
            main>div:last-child {
                width: 320px !important;
            }
        }

        /* Touch device optimizations */
        @media (hover: none) and (pointer: coarse) {
            .glass-panel:hover {
                transform: none;
                box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4), inset 0 0 0 1px var(--glass-highlight);
            }

            .sentence-span:hover {
                background: transparent;
                border-color: transparent;
            }

            .sentence-span.active {
                background: linear-gradient(135deg, rgba(139, 92, 246, 0.25), rgba(139, 92, 246, 0.1));
            }
        }

        /* Desktop hidden class */
        .mobile-only {
            display: none;
        }

        @media (max-width: 768px) {
            .mobile-only {
                display: block;
            }

            .desktop-only {
                display: none;
            }
        }
    </style>
</head>

<body class="h-screen flex flex-col overflow-hidden">

    <!-- Reading HUD (Fixed Top-Right) -->
    <div class="reading-hud" id="reading-hud">
        <div class="flex items-center justify-between mb-2">
            <span class="text-xs font-medium text-slate-400 uppercase tracking-wider">Reading Progress</span>
            <span class="text-xs text-violet-400 font-mono" id="wpm-display">0 WPM</span>
        </div>
        <div class="progress-bar-container">
            <div class="progress-bar-fill" id="progress-fill" style="width: 0%"></div>
        </div>
        <div class="flex justify-between mt-2 text-xs text-slate-500">
            <span id="time-elapsed">0:00</span>
            <span id="sentences-read">0/36 sentences</span>
        </div>
    </div>

    <!-- Floating Article Audio Player (Bottom) - Always on top -->
    <div id="article-audio-bar"
        class="fixed bottom-0 left-0 right-0 z-[100] bg-[#0B1120]/95 backdrop-blur-xl border-t border-white/10 px-4 py-3 md:px-6 md:py-4 transition-transform duration-300"
        style="transform: translateY(100%); --audio-bar-height: 70px;">
        <div class="max-w-4xl mx-auto flex items-center gap-4">
            <!-- Play/Pause Button -->
            <button id="article-play-btn" onclick="toggleArticleAudio()"
                class="w-12 h-12 md:w-14 md:h-14 rounded-full bg-violet-600 text-white flex items-center justify-center shadow-lg shadow-violet-500/30 hover:bg-violet-500 transition active:scale-95 flex-shrink-0">
                <span class="material-symbols-rounded text-2xl md:text-3xl" id="article-play-icon">play_arrow</span>
            </button>

            <!-- Progress Section -->
            <div class="flex-1 min-w-0">
                <div class="flex items-center justify-between mb-1">
                    <span class="text-xs text-slate-400 truncate">ğŸ§ The Economist - The World in Brief</span>
                    <span class="text-xs text-violet-400 font-mono" id="article-time">0:00 / 0:00</span>
                </div>
                <div class="h-2 bg-white/10 rounded-full w-full overflow-hidden cursor-pointer"
                    onclick="seekArticleAudio(event)">
                    <div class="h-full bg-gradient-to-r from-violet-600 to-violet-400 rounded-full transition-all duration-100"
                        id="article-progress" style="width: 0%"></div>
                </div>
            </div>

            <!-- Speed Control -->
            <button onclick="cycleSpeed()"
                class="hidden md:flex items-center gap-1 px-3 py-1 rounded-full bg-white/5 border border-white/10 text-slate-400 text-xs hover:bg-white/10 transition">
                <span id="speed-display">1x</span>
            </button>

            <!-- Close Button -->
            <button onclick="hideAudioBar()"
                class="w-8 h-8 rounded-full bg-white/5 text-slate-400 flex items-center justify-center hover:bg-white/10 transition">
                <span class="material-symbols-rounded text-lg">close</span>
            </button>
        </div>
    </div>

    <!-- Mobile Analysis Modal (Shows on sentence click) -->
    <div id="mobile-modal" class="md:hidden fixed inset-0 z-[90] hidden">
        <!-- Backdrop -->
        <div class="absolute inset-0 bg-black/70 backdrop-blur-sm" onclick="closeMobileModal()"></div>

        <!-- Modal Content - Locked Horizontal Scroll & Scroll Containment -->
        <div
            class="absolute bottom-0 left-0 right-0 bg-[#0B1120] rounded-t-3xl max-h-[70vh] overflow-y-auto overflow-x-hidden overscroll-contain animate-slideUp w-full">
            <!-- Header with audio and close button - Fixed Height & Alignment -->
            <div
                class="sticky top-0 bg-[#0B1120]/95 backdrop-blur-md border-b border-white/10 px-4 h-16 flex items-center justify-between z-10 w-full">
                <div class="flex items-center gap-3 overflow-hidden">
                    <button id="mobile-sentence-audio-btn" onclick="playMobileSentenceAudio()"
                        class="w-10 h-10 rounded-full bg-violet-600 flex items-center justify-center active:scale-95 transition-transform flex-shrink-0 shadow-lg shadow-violet-500/20">
                        <span class="material-symbols-rounded text-white text-xl"
                            id="mobile-audio-icon">play_arrow</span>
                    </button>
                    <span class="text-violet-400 font-bold text-sm uppercase tracking-wider truncate">Sentence
                        Analysis</span>
                </div>
                <button onclick="closeMobileModal()"
                    class="w-8 h-8 rounded-full bg-white/5 flex items-center justify-center flex-shrink-0 active:bg-white/10 transition-colors">
                    <span class="material-symbols-rounded text-slate-400">close</span>
                </button>
            </div>

            <!-- Translation -->
            <div class="p-4 border-b border-white/10">
                <div class="text-xs text-violet-400 font-bold uppercase mb-2">ğŸŒ Translation</div>
                <p id="mobile-translation" class="text-slate-200 text-base leading-relaxed"></p>
            </div>

            <!-- Grammar -->
            <div class="p-4 border-b border-white/10">
                <div class="text-xs text-blue-400 font-bold uppercase mb-2">ğŸ“ Grammar</div>
                <div id="mobile-grammar" class="space-y-2"></div>
            </div>

            <!-- Vocabulary -->
            <div class="p-4 pb-20">
                <div class="text-xs text-emerald-400 font-bold uppercase mb-2">ğŸ“š Vocabulary</div>
                <div id="mobile-vocab" class="space-y-2"></div>
            </div>
        </div>
    </div>

    <style>
        @keyframes slideUp {
            from {
                transform: translateY(100%);
            }

            to {
                transform: translateY(0);
            }
        }

        .animate-slideUp {
            animation: slideUp 0.3s ease-out;
        }
    </style>

    <!-- Glass Header -->
    <header
        class="header-glass h-16 flex items-center justify-between px-6 flex-shrink-0 z-30 relative mx-4 mt-4 rounded-2xl">
        <div class="flex items-center gap-3">
            <div
                class="bg-violet-600 text-white w-10 h-10 flex items-center justify-center font-bold text-xl rounded-xl shadow-lg shadow-violet-500/30">
                T</div>
            <h1 class="font-serif font-bold text-lg tracking-tight text-slate-100">TOEFL Reading Lab</h1>
        </div>
        <div class="text-sm font-sans text-slate-400 flex items-center gap-4">
            <span class="bg-white/5 px-3 py-1 rounded-full border border-white/10 shadow-sm">ğŸ“… Jan 2026 Edition</span>
            <a href="toefl_notes.html" class="flex items-center gap-1 hover:text-violet-400 transition">
                <span class="material-symbols-rounded text-lg">school</span> Back to Course
            </a>
        </div>
    </header>

    <!-- Main Content Area -->
    <main class="flex-1 flex overflow-hidden pt-4 px-4 pb-4 gap-4">

        <!-- Left: Article Content (Scrollable Glass Card) -->
        <div class="flex-1 overflow-y-auto p-0 glass-panel rounded-3xl relative" id="article-scroll-container">

            <!-- Hero Image Background for Article Header -->
            <div class="relative h-64 w-full topic-image">
                <img src="images/header_news_2026.png" class="w-full h-full object-cover rounded-t-[23px]">
                <div class="absolute inset-0 bg-gradient-to-t from-[#0B1120] via-transparent to-transparent"></div>
                <!-- Text Overlay -->
                <div class="absolute bottom-6 left-8 right-8">
                    <span
                        class="bg-violet-600 text-white font-sans font-bold text-xs uppercase tracking-widest mb-2 inline-block px-3 py-1 rounded-lg shadow-lg shadow-violet-500/30">The
                        Economist</span>
                    <h1 class="text-4xl md:text-5xl font-bold text-white font-serif drop-shadow-lg">The world in brief
                    </h1>
                    <p class="text-slate-300 mt-2 text-sm">Catch up quickly on the global stories that matter</p>
                    <div class="flex gap-4 mt-3 text-xs text-slate-400">
                        <span>ğŸ“ Articles updated less than 1 hour ago</span>
                        <span>ğŸ§ Audio recorded 8 hours ago</span>
                    </div>
                </div>
            </div>

            <article class="prose prose-lg prose-invert max-w-none font-serif leading-loose text-slate-200 p-8 md:p-12">
                <p
                    class="font-sans text-violet-300/80 italic text-base border-l-4 border-violet-500 pl-4 mb-8 bg-violet-500/10 py-3 rounded-r-lg">
                    ğŸ¯ Interactive Reading Module: Click any sentence to analyze structure and key vocabulary.
                </p>

                <!-- Floating Logic Signpost Legend -->
                <div class="glass-popup rounded-xl p-4 mb-8 flex flex-wrap gap-4 text-sm">
                    <span class="text-slate-400">Legend:</span>
                    <span class="logic-word text-xs">Transition Words</span>
                    <span class="vocab-highlight text-xs">Vocabulary</span>
                    <span class="grammar-subject text-xs">Subject</span>
                    <span class="grammar-verb text-xs">Verb</span>
                    <span class="grammar-object text-xs">Object</span>
                </div>

                <!-- Sections Container -->
                <div id="article-container">
                    <!-- JS will populate sentences here -->
                </div>

                <div class="h-32"></div> <!-- Spacer -->
            </article>
        </div>

        <!-- Right: Analysis Panel (Glass Card) -->
        <div id="analysis-panel"
            class="w-full md:w-[450px] glass-panel rounded-3xl flex flex-col z-20 transition-transform duration-300 overflow-hidden">

            <!-- Mobile Header with Close Button -->
            <div class="mobile-only flex items-center justify-between px-4 pt-3 pb-1">
                <div class="mobile-drag-handle mx-0"></div>
                <button onclick="document.getElementById('analysis-panel').classList.remove('show-panel')"
                    class="w-8 h-8 rounded-full bg-white/10 text-slate-400 flex items-center justify-center">
                    <span class="material-symbols-rounded text-lg">close</span>
                </button>
            </div>

            <!-- Empty State -->
            <div id="empty-state" class="flex-1 flex flex-col items-center justify-center p-8 text-center">
                <div
                    class="w-20 h-20 bg-violet-500/10 rounded-full flex items-center justify-center mb-6 border border-violet-500/20">
                    <span class="material-symbols-rounded text-4xl text-violet-400">touch_app</span>
                </div>
                <p class="text-lg text-slate-400">Select a sentence<br>to begin analysis.</p>
                <p class="text-sm text-slate-500 mt-4">Grammar â€¢ Vocabulary â€¢ Translation</p>
            </div>

            <!-- Analysis Content -->
            <div id="analysis-content" class="hidden flex-col h-full overflow-y-auto">

                <!-- 1. Translation Card -->
                <div class="p-6 border-b border-white/10 bg-white/5">
                    <h3
                        class="text-xs font-bold text-violet-400 uppercase tracking-widest mb-3 flex items-center gap-2">
                        <span class="material-symbols-rounded text-sm">translate</span> Translation
                    </h3>
                    <p id="analysis-cn" class="text-lg font-sans text-slate-200 font-medium leading-relaxed"></p>
                </div>

                <!-- 2. Grammar Breakdown (Sentence Crusher) -->
                <div class="p-6 border-b border-white/10 bg-gradient-to-br from-blue-500/5 to-transparent">
                    <h3 class="text-xs font-bold text-blue-400 uppercase tracking-widest mb-4 flex items-center gap-2">
                        <span class="material-symbols-rounded text-sm">account_tree</span> Grammar Structure (Sentence
                        Crusher)
                    </h3>
                    <div id="analysis-grammar" class="space-y-3 font-mono text-sm text-slate-300">
                        <!-- Populated by JS -->
                    </div>
                </div>

                <!-- 3. Key Vocabulary (TOEFL Synonyms) -->
                <div class="p-6 flex-1 bg-gradient-to-br from-violet-500/10 to-transparent">
                    <h3
                        class="text-xs font-bold text-violet-400 uppercase tracking-widest mb-4 flex items-center gap-2">
                        <span class="material-symbols-rounded text-sm">menu_book</span> TOEFL Vocabulary
                    </h3>
                    <div id="analysis-vocab" class="space-y-4 text-slate-200">
                        <!-- Populated by JS -->
                    </div>
                </div>

                <!-- Audio Bar -->
                <div
                    class="p-4 bg-[#0B1120]/80 backdrop-blur-md border-t border-white/10 flex items-center gap-4 sticky bottom-0">
                    <button id="main-audio-btn"
                        class="w-12 h-12 rounded-full bg-violet-600 text-white flex items-center justify-center shadow-lg shadow-violet-500/30 hover:scale-105 transition hover:bg-violet-500">
                        <span class="material-symbols-rounded text-2xl">play_arrow</span>
                    </button>
                    <div class="flex-1">
                        <div class="text-xs text-slate-500 font-bold uppercase mb-1">Native Audio</div>
                        <div class="h-2 bg-white/10 rounded-full w-full overflow-hidden">
                            <div class="h-full bg-gradient-to-r from-violet-500 to-violet-400 w-0 transition-all duration-300"
                                id="audio-progress"></div>
                        </div>
                    </div>
                </div>

            </div>
        </div>

    </main>

    <!-- Initial Data & Logic -->
    <script>
        // Article Data (Excerpt based on user input, structured for learning)
        const articleSections = [
            {
                topic: "China's Economy",
                sentences: [
                    {
                        en: "Chinaâ€™s leader, Xi Jinping, said the economy would meet its growth target in 2025, with GDP expanding by around 5%.",
                        cn: "ä¸­å›½é¢†å¯¼äººä¹ è¿‘å¹³è¡¨ç¤ºï¼Œ2025å¹´ç»æµå°†è¾¾åˆ°å¢é•¿ç›®æ ‡ï¼ŒGDPå°†å¢é•¿çº¦5%ã€‚",
                        grammar: [
                            { type: "Subject", text: "Chinaâ€™s leader, Xi Jinping" },
                            { type: "Verb", text: "said" },
                            { type: "Object Clause", text: "the economy would meet its growth target..." },
                            { type: "Modifier", text: "with GDP expanding by around 5% (ä¼´éšçŠ¶è¯­)" }
                        ],
                        vocab: [
                            { w: "meet (target)", m: "v. è¾¾åˆ°ï¼ˆç›®æ ‡ï¼‰" },
                            { w: "expand", m: "v. æ‰©å¼ ï¼Œå¢é•¿" }
                        ]
                    },
                    {
                        en: "Growth in exports buoyed the economy this year, though slowing investment and a property crisis dampened sentiment.",
                        cn: "ä»Šå¹´å‡ºå£å¢é•¿æ”¯æ’‘äº†ç»æµï¼Œå°½ç®¡æŠ•èµ„æ”¾ç¼“å’Œæˆ¿åœ°äº§å±æœºæŠ‘åˆ¶äº†å¸‚åœºæƒ…ç»ªã€‚",
                        grammar: [
                            { type: "Subj", text: "Growth in exports" },
                            { type: "Verb", text: "buoyed" },
                            { type: "Obj", text: "the economy" },
                            { type: "Conjunction", text: "though" },
                            { type: "Subj 2", text: "slowing investment..." },
                            { type: "Verb 2", text: "dampened" }
                        ],
                        vocab: [
                            { w: "buoy", m: "v. æ”¯æ’‘ï¼ŒææŒ¯ (keep afloat)" },
                            { w: "dampen", m: "v. æŠ‘åˆ¶ï¼Œæ³¼å†·æ°´" },
                            { w: "sentiment", m: "n. æƒ…ç»ªï¼Œè§‚ç‚¹" }
                        ]
                    },
                    {
                        en: "Meanwhile Chinaâ€™s official manufacturing purchasing managersâ€™ index showed that factory activity increased unexpectedly in December, ending eight consecutive months of contraction.",
                        cn: "ä¸æ­¤åŒæ—¶ï¼Œä¸­å›½å®˜æ–¹åˆ¶é€ ä¸šé‡‡è´­ç»ç†äººæŒ‡æ•°æ˜¾ç¤ºï¼Œ12æœˆå·¥å‚æ´»åŠ¨æ„å¤–å¢é•¿ï¼Œç»“æŸäº†è¿ç»­å…«ä¸ªæœˆçš„èç¼©ã€‚",
                        grammar: [
                            { type: "Subj", text: "Chinaâ€™s official... index (PMI)" },
                            { type: "Verb", text: "showed" },
                            { type: "Obj Clause", text: "that factory activity increased..." },
                            { type: "Modifier", text: "ending eight consecutive months... (Result)" }
                        ],
                        vocab: [
                            { w: "consecutive", m: "adj. è¿ç»­çš„" },
                            { w: "contraction", m: "n. æ”¶ç¼©ï¼Œèç¼©" }
                        ]
                    }
                ]
            },
            {
                topic: "Warner Bros vs Paramount",
                sentences: [
                    {
                        en: "Warner Bros Discovery plans to reject its rival Paramountâ€™s bid of $108bn to purchase the Hollywood studio.",
                        cn: "åçº³å…„å¼Ÿæ¢ç´¢å…¬å¸è®¡åˆ’æ‹’ç»å…¶ç«äº‰å¯¹æ‰‹æ´¾æ‹‰è’™ä»¥1080äº¿ç¾å…ƒæ”¶è´­è¿™å®¶å¥½è±ååˆ¶ç‰‡å‚çš„æŠ¥ä»·ã€‚",
                        grammar: [
                            { type: "Subj", text: "Warner Bros Discovery" },
                            { type: "Verb", text: "plans to reject" },
                            { type: "Obj", text: "Paramountâ€™s bid" },
                            { type: "Modifier", text: "to purchase... (Infinitive/Purpose)" }
                        ],
                        vocab: [
                            { w: "bid", m: "n. å‡ºä»·ï¼ŒæŠ•æ ‡" },
                            { w: "rival", m: "n. ç«äº‰å¯¹æ‰‹" }
                        ]
                    },
                    {
                        en: "According to reports, Warnerâ€™s board still considers the $83bn offer from Netflix to be superior.",
                        cn: "æ®æŠ¥é“ï¼Œåçº³è‘£äº‹ä¼šä»è®¤ä¸ºNetflixæå‡ºçš„830äº¿ç¾å…ƒçš„æŠ¥ä»·æ›´ä¼˜ã€‚",
                        grammar: [
                            { type: "Adv", text: "According to reports" },
                            { type: "Subj", text: "Warnerâ€™s board" },
                            { type: "Verb", text: "considers" },
                            { type: "Obj", text: "the $83bn offer" },
                            { type: "Comp", text: "to be superior" }
                        ],
                        vocab: [
                            { w: "superior", m: "adj. æ›´ä¼˜è¶Šçš„ï¼Œä¸Šçº§çš„" }
                        ]
                    },
                    {
                        en: "Paramount had swooped in with its bid just days after Warner and Netflix had announced their deal.",
                        cn: "æ´¾æ‹‰è’™åœ¨åçº³å’ŒNetflixå®£å¸ƒäº¤æ˜“ä»…å‡ å¤©åå°±çªç„¶æå‡ºäº†æŠ¥ä»·ã€‚",
                        grammar: [
                            { type: "Verb", text: "swooped in (with its bid)" },
                            { type: "Time", text: "just days after..." }
                        ],
                        vocab: [
                            { w: "swoop in", m: "v. çªç„¶ä»‹å…¥ï¼Œçªè¢­" }
                        ]
                    },
                    {
                        en: "No final decision has been made yet, but Warnerâ€™s board is expected to meet next week.",
                        cn: "å°šæœªåšå‡ºæœ€ç»ˆå†³å®šï¼Œä½†åçº³è‘£äº‹ä¼šé¢„è®¡å°†äºä¸‹å‘¨å¼€ä¼šã€‚",
                        grammar: [
                            { type: "Passive", text: "has been made" },
                            { type: "Passive", text: "is expected to meet" }
                        ],
                        vocab: []
                    }
                ]
            },
            {
                topic: "Iran Protests",
                sentences: [
                    {
                        en: "Iran appointed a new central bank governor and announced a public holiday as anger over living standards prompted the largest anti-government demonstrations in years.",
                        cn: "ä¼Šæœ—ä»»å‘½äº†ä¸€ä½æ–°çš„å¤®è¡Œè¡Œé•¿å¹¶å®£å¸ƒå…¬å…±å‡æœŸï¼Œå› ä¸ºå¯¹ç”Ÿæ´»æ°´å¹³çš„æ„¤æ€’å¼•å‘äº†å¤šå¹´æ¥æœ€å¤§è§„æ¨¡çš„åæ”¿åºœç¤ºå¨æ´»åŠ¨ã€‚",
                        grammar: [
                            { type: "Subj", text: "Iran" },
                            { type: "Verb", text: "appointed... and announced" },
                            { type: "Obj", text: "governor... holiday" },
                            { type: "Adverbial", text: "as anger prompted..." }
                        ],
                        vocab: [
                            { w: "appoint", m: "v. ä»»å‘½" },
                            { w: "prompt", m: "v. ä¿ƒä½¿ï¼Œå¼•å‘" },
                            { w: "demonstration", m: "n. ç¤ºå¨æ¸¸è¡Œ" }
                        ]
                    },
                    {
                        en: "The protests, which began on Sunday, have been fuelled by the countryâ€™s ailing economy.",
                        cn: "å‘¨æ—¥å¼€å§‹çš„æŠ—è®®æ´»åŠ¨å—åˆ°è¯¥å›½ç³Ÿç³•ç»æµçš„æ¨åŠ¨ã€‚",
                        grammar: [
                            { type: "Subj", text: "The protests" },
                            { type: "Clause", text: "which began on Sunday (Non-restrictive)" },
                            { type: "Verb (Passive)", text: "have been fuelled by" },
                            { type: "Agent", text: "the countryâ€™s ailing economy" }
                        ],
                        vocab: [
                            { w: "fuel", m: "v. åŠ å‰§ï¼Œåˆºæ¿€ (fuel the fire)" },
                            { w: "ailing", m: "adj. ç”Ÿç—…çš„ï¼Œå¤„å¢ƒå›°éš¾çš„" }
                        ]
                    },
                    {
                        en: "Iranâ€™s currency, the rial, has plunged to record lows against the dollar and the annual inflation rate has risen above 40%.",
                        cn: "ä¼Šæœ—è´§å¸é‡Œäºšå°”å…‘ç¾å…ƒæ±‡ç‡è·Œè‡³å†å²æ–°ä½ï¼Œå¹´é€šèƒ€ç‡å·²å‡è‡³40%ä»¥ä¸Šã€‚",
                        grammar: [
                            { type: "Subj", text: "Iranâ€™s currency" },
                            { type: "Appositive", text: "the rial" },
                            { type: "Verb", text: "has plunged" },
                            { type: "Prep Phrase", text: "to record lows" }
                        ],
                        vocab: [
                            { w: "plunge", m: "v. æš´è·Œï¼Œéª¤é™" },
                            { w: "inflation", m: "n. é€šè´§è†¨èƒ€" }
                        ]
                    }
                ]
            },
            {
                topic: "UN Budget Crisis",
                sentences: [
                    {
                        en: "The United Nations slashed its budget for 2026 by 7%, to $3.45bn, and cut 2,900 jobs.",
                        cn: "è”åˆå›½å°†2026å¹´çš„é¢„ç®—å‰Šå‡äº†7%ï¼Œè‡³34.5äº¿ç¾å…ƒï¼Œå¹¶è£å‡äº†2900ä¸ªå·¥ä½œå²—ä½ã€‚",
                        grammar: [
                            { type: "Subj", text: "The United Nations" },
                            { type: "Verb", text: "slashed... and cut" },
                            { type: "Obj", text: "budget... jobs" }
                        ],
                        vocab: [
                            { w: "slash", m: "v. å¤§å¹…å‰Šå‡" }
                        ]
                    },
                    {
                        en: "The organisation is grappling with a funding shortfall of nearly $1.6bn driven primarily by America, which owes more than $1.4bn in arrears.",
                        cn: "è¯¥ç»„ç»‡æ­£åŠªåŠ›åº”å¯¹è¿‘16äº¿ç¾å…ƒçš„èµ„é‡‘ç¼ºå£ï¼Œè¿™ä¸»è¦æ˜¯ç”±æ‹–æ¬ è¶…è¿‡14äº¿ç¾å…ƒä¼šè´¹çš„ç¾å›½é€ æˆçš„ã€‚",
                        grammar: [
                            { type: "Verb Phrase", text: "grapple with (act of fighting)" },
                            { type: "Obj", text: "funding shortfall" },
                            { type: "Modifier", text: "driven primarily by America..." },
                            { type: "Clause", text: "which owes... (describing America)" }
                        ],
                        vocab: [
                            { w: "grapple with", m: "v. æ‰­æ‰“ï¼ŒåŠªåŠ›å…‹æœ" },
                            { w: "shortfall", m: "n. äºç©ºï¼Œä¸è¶³" },
                            { w: "arrears", m: "n. æ‹–æ¬ æ¬¾ (in arrears)" }
                        ]
                    },
                    {
                        en: "The Trump administration has accused the UN of wasting taxpayer dollars.",
                        cn: "ç‰¹æœ—æ™®æ”¿åºœæŒ‡è´£è”åˆå›½æµªè´¹çº³ç¨äººçš„é’±ã€‚",
                        grammar: [
                            { type: "Verb Phrase", text: "accused... of..." },
                            { type: "Noun", text: "taxpayer dollars" }
                        ],
                        vocab: [
                            { w: "accuse of", m: "v. æŒ‡è´£æŸäººåšæŸäº‹" }
                        ]
                    }
                ]
            },
            {
                topic: "Guinea Election",
                sentences: [
                    {
                        en: "In Guinea, General Mamady Doumbouya won a presidential election that was marred by accusations of manipulation.",
                        cn: "åœ¨å‡ å†…äºšï¼Œé©¬é©¬è¿ªÂ·æ•¦å¸ƒäºšå°†å†›èµ¢å¾—äº†ä¸€åœºè¢«æ“çºµæŒ‡æ§è’™ä¸Šé˜´å½±çš„æ€»ç»Ÿé€‰ä¸¾ã€‚",
                        grammar: [
                            { type: "Subj", text: "General Mamady Doumbouya" },
                            { type: "Verb", text: "won" },
                            { type: "Obj", text: "election" },
                            { type: "Clause", text: "that was marred by... (ä¿®é¥° election)" }
                        ],
                        vocab: [
                            { w: "marred by", m: "v. è¢«...æŸå/ç·æ±¡" },
                            { w: "manipulation", m: "n. æ“çºµï¼Œä½œå¼Š" }
                        ]
                    },
                    {
                        en: "Provisional data published by the countryâ€™s election commission suggested General Doumbouya secured more than 86% of the vote; some opposition candidates were barred from running.",
                        cn: "è¯¥å›½é€‰ä¸¾å§”å‘˜ä¼šå…¬å¸ƒçš„åˆæ­¥æ•°æ®æ˜¾ç¤ºï¼Œæ•¦å¸ƒäºšå°†å†›è·å¾—äº†è¶…è¿‡86%çš„é€‰ç¥¨ï¼›ä¸€äº›åå¯¹æ´¾å€™é€‰äººè¢«ç¦æ­¢å‚é€‰ã€‚",
                        grammar: [
                            { type: "Subj", text: "Provisional data" },
                            { type: "Verb", text: "suggested" },
                            { type: "Clause", text: "(that) General Doumbouya secured..." },
                            { type: "Passive", text: "were barred from running" }
                        ],
                        vocab: [
                            { w: "provisional", m: "adj. ä¸´æ—¶çš„ï¼Œæš‚å®šçš„" },
                            { w: "secure", m: "v. è·å¾—ï¼Œèµ¢å¾—" },
                            { w: "bar from", m: "v. ç¦æ­¢..." }
                        ]
                    },
                    {
                        en: "The junta leader seized power in a coup four years ago.",
                        cn: "è¿™ä½å†›æ”¿åºœé¢†å¯¼äººå››å¹´å‰é€šè¿‡æ”¿å˜å¤ºå–äº†æ”¿æƒã€‚",
                        grammar: [
                            { type: "Subj", text: "The junta leader" },
                            { type: "Verb", text: "seized" },
                            { type: "Obj", text: "power" },
                            { type: "Time", text: "four years ago" }
                        ],
                        vocab: [
                            { w: "junta", m: "n. å†›æ”¿åºœ (military group)" },
                            { w: "coup", m: "n. æ”¿å˜" }
                        ]
                    },
                    {
                        en: "The election victory gives him a seven-year presidential term.",
                        cn: "è¿™æ¬¡é€‰ä¸¾èƒœåˆ©ç»™äº†ä»–ä¸ƒå¹´çš„æ€»ç»Ÿä»»æœŸã€‚",
                        grammar: [
                            { type: "Verb", text: "gives" },
                            { type: "Ind Obj", text: "him" },
                            { type: "Dir Obj", text: "a seven-year presidential term" }
                        ],
                        vocab: [
                            { w: "term", m: "n. ä»»æœŸ" }
                        ]
                    }
                ]
            },
            {
                topic: "India Steel Tariffs",
                sentences: [
                    {
                        en: "India extended a tariff on steel imports for three years as it tries to protect its producers from international oversupply, particularly from China.",
                        cn: "å°åº¦å°†é’¢é“è¿›å£å…³ç¨å»¶é•¿äº†ä¸‰å¹´ï¼Œè¯•å›¾ä¿æŠ¤æœ¬å›½ç”Ÿäº§å•†å…å—å›½é™…ä¾›åº”è¿‡å‰©ï¼ˆç‰¹åˆ«æ˜¯æ¥è‡ªä¸­å›½ï¼‰çš„å½±å“ã€‚",
                        grammar: [
                            { type: "Verb", text: "extended" },
                            { type: "Obj", text: "a tariff" },
                            { type: "Adverbial", text: "as it tries to protect..." }
                        ],
                        vocab: [
                            { w: "tariff", m: "n. å…³ç¨" },
                            { w: "oversupply", m: "n. ä¾›åº”è¿‡å‰©" }
                        ]
                    },
                    {
                        en: "The tariff rate will start at 12% before gradually decreasing to 11% over the three-year period.",
                        cn: "å…³ç¨ç¨ç‡å°†ä»12%å¼€å§‹ï¼Œç„¶ååœ¨ä¸‰å¹´å†…é€æ¸é™è‡³11%ã€‚",
                        grammar: [
                            { type: "Verb", text: "start at..." },
                            { type: "Modifier", text: "before gradually decreasing..." }
                        ],
                        vocab: []
                    },
                    {
                        en: "Certain products, such as stainless steel, are exempt.",
                        cn: "æŸäº›äº§å“ï¼ˆå¦‚ä¸é”ˆé’¢ï¼‰è¢«è±å…ã€‚",
                        grammar: [
                            { type: "Adj", text: "exempt (è¢«è±å…çš„)" }
                        ],
                        vocab: [
                            { w: "stainless steel", m: "n. ä¸é”ˆé’¢" },
                            { w: "exempt", m: "adj. è¢«è±å…çš„" }
                        ]
                    },
                    {
                        en: "Shares in Indian steelmakers, including Tata Steel and JSW Steel, rallied on the news.",
                        cn: "åŒ…æ‹¬å¡”å¡”é’¢é“å’ŒJSWé’¢é“åœ¨å†…çš„å°åº¦é’¢é“åˆ¶é€ å•†çš„è‚¡ä»·å—æ­¤æ¶ˆæ¯å½±å“ä¸Šæ¶¨ã€‚",
                        grammar: [
                            { type: "Subj", text: "Shares" },
                            { type: "Verb", text: "rallied" },
                            { type: "Reason", text: "on the news" }
                        ],
                        vocab: [
                            { w: "rally", m: "v. (è‚¡ä»·)å›å‡ï¼Œåå¼¹" }
                        ]
                    }
                ]
            },
            {
                topic: "Warren Buffett Steps Down",
                sentences: [
                    {
                        en: "Warren Buffett steps down as chief executive of Berkshire Hathaway, Americaâ€™s ninth-most-valuable company, on Wednesday, ending his 60-year tenure at the helm.",
                        cn: "æ²ƒä¼¦Â·å·´è²ç‰¹å°†äºå‘¨ä¸‰å¸ä»»ç¾å›½å¸‚å€¼ç¬¬ä¹å¤§å…¬å¸ä¼¯å…‹å¸Œå°”Â·å“ˆæ’’éŸ¦å…¬å¸çš„é¦–å¸­æ‰§è¡Œå®˜ï¼Œç»“æŸä»–åœ¨è¯¥å…¬å¸æŒèˆµçš„60å¹´ä»»æœŸã€‚",
                        grammar: [
                            { type: "Verb", text: "steps down" },
                            { type: "Appositive", text: "Americaâ€™s ninth-most-valuable company" },
                            { type: "Modifier", text: "ending his 60-year tenure... (Result)" }
                        ],
                        vocab: [
                            { w: "step down", m: "v. è¾èŒï¼Œä¸‹å°" },
                            { w: "tenure", m: "n. ä»»æœŸ" },
                            { w: "at the helm", m: "phr. æŒèˆµï¼Œè´Ÿè´£" }
                        ]
                    },
                    {
                        en: "Mr Buffett, who is 95, will remain chairman of Berkshireâ€™s board.",
                        cn: "ç°å¹´95å²çš„å·´è²ç‰¹å…ˆç”Ÿå°†ç»§ç»­æ‹…ä»»ä¼¯å…‹å¸Œå°”è‘£äº‹ä¼šä¸»å¸­ã€‚",
                        grammar: [
                            { type: "Clause", text: "who is 95" },
                            { type: "Verb", text: "remain" },
                            { type: "Comp", text: "chairman" }
                        ],
                        vocab: []
                    },
                    {
                        en: "Greg Abel, who is currently vice chair of non-insurance operations, will succeed him on January 1st.",
                        cn: "ç›®å‰æ‹…ä»»éä¿é™©ä¸šåŠ¡å‰¯è‘£äº‹é•¿çš„æ ¼é›·æ ¼Â·é˜¿è´å°”å°†äº1æœˆ1æ—¥æ¥æ›¿ä»–ã€‚",
                        grammar: [
                            { type: "Subj", text: "Greg Abel" },
                            { type: "Verb", text: "succeed (æ¥æ›¿)" }
                        ],
                        vocab: [
                            { w: "succeed", m: "v. æ¥æ›¿ï¼Œç»§ä»»" }
                        ]
                    }
                ]
            },
            {
                topic: "Figure of the Day",
                sentences: [
                    {
                        en: "Figure of the day: 16,000, the approximate number of buildings destroyed in the fires that tore across Los Angeles County nearly a year ago.",
                        cn: "ä»Šæ—¥æ•°å­—ï¼š16000ï¼Œè¿™æ˜¯è¿‘ä¸€å¹´å‰å¸­å·æ´›æ‰çŸ¶å¿çš„å¤§ç«ä¸­è¢«æ¯å»ºç­‘çš„å¤§è‡´æ•°é‡ã€‚",
                        grammar: [
                            { type: "Noun", text: "Figure of the day" },
                            { type: "Appositive", text: "16,000" },
                            { type: "Modifier", text: "destroyed in the fires (Past Participle)" },
                            { type: "Clause", text: "that tore across... (Rel Clause)" }
                        ],
                        vocab: [
                            { w: "approximate", m: "adj. å¤§çº¦çš„" },
                            { w: "tear across", m: "v. å¸­å·ï¼Œæ¨ªæ‰«" }
                        ]
                    }
                ]
            },
            {
                topic: "Politics: Democrats Step Up",
                sentences: [
                    {
                        en: "Until January 2nd we are looking ahead to next yearâ€™s big stories.",
                        cn: "åœ¨1æœˆ2æ—¥ä¹‹å‰ï¼Œæˆ‘ä»¬éƒ½åœ¨å±•æœ›æ˜å¹´çš„é‡å¤§æ–°é—»ã€‚",
                        grammar: [
                            { type: "Time", text: "Until January 2nd" },
                            { type: "Verb", text: "look ahead to (å±•æœ›)" }
                        ],
                        vocab: []
                    },
                    {
                        en: "Today, what will shape American politics?",
                        cn: "ä»Šå¤©ï¼Œä»€ä¹ˆå°†å¡‘é€ ç¾å›½æ”¿æ²»ï¼Ÿ",
                        grammar: [], vocab: []
                    },
                    {
                        en: "Donald Trumpâ€™s return to the presidency left Democrats in disarray.",
                        cn: "å”çº³å¾·Â·ç‰¹æœ—æ™®é‡è¿”æ€»ç»Ÿå®åº§è®©æ°‘ä¸»å…šäººé™·å…¥æ··ä¹±ã€‚",
                        grammar: [
                            { type: "Verb", text: "left" },
                            { type: "Comp", text: "in disarray" }
                        ],
                        vocab: [
                            { w: "disarray", m: "n. æ··ä¹±" }
                        ]
                    },
                    {
                        en: "They lacked leadership and direction.",
                        cn: "ä»–ä»¬ç¼ºä¹é¢†å¯¼åŠ›å’Œæ–¹å‘ã€‚",
                        grammar: [], vocab: []
                    },
                    {
                        en: "Still, the party notched some impressive wins in state elections in November.",
                        cn: "å°½ç®¡å¦‚æ­¤ï¼Œè¯¥å…šåœ¨11æœˆçš„å·é€‰ä¸¾ä¸­è¿˜æ˜¯å–å¾—äº†ä¸€äº›ä»¤äººå°è±¡æ·±åˆ»çš„èƒœåˆ©ã€‚",
                        grammar: [{ type: "Verb", text: "notched" }],
                        vocab: [{ w: "notch", m: "v. èµ¢å–" }]
                    },
                    {
                        en: "And in 2026 its fight back could gain strength.",
                        cn: "2026å¹´ï¼Œå…¶åå‡»å¯èƒ½ä¼šå¢å¼ºã€‚",
                        grammar: [], vocab: []
                    },
                    {
                        en: "In the midterm elections, Democrats will probably retake the House of Representatives.",
                        cn: "åœ¨ä¸­æœŸé€‰ä¸¾ä¸­ï¼Œæ°‘ä¸»å…šå¯èƒ½ä¼šå¤ºå›ä¼—è®®é™¢ã€‚",
                        grammar: [
                            { type: "Verb", text: "retake (re-take)" },
                            { type: "Obj", text: "House of Representatives" }
                        ],
                        vocab: [
                            { w: "midterm election", m: "n. ä¸­æœŸé€‰ä¸¾" }
                        ]
                    },
                    {
                        en: "That would grant the Democrats subpoena power and the ability to go on the offensive.",
                        cn: "è¿™å°†èµ‹äºˆæ°‘ä¸»å…šä¼ ç¥¨æƒä»¥åŠå‘èµ·è¿›æ”»çš„èƒ½åŠ›ã€‚",
                        grammar: [
                            { type: "Verb (Double Obj)", text: "grant" },
                            { type: "Ind Obj", text: "Democrats" },
                            { type: "Dir Obj", text: "subpoena power..." }
                        ],
                        vocab: [
                            { w: "subpoena", m: "n. ä¼ ç¥¨" },
                            { w: "offensive", m: "n. æ”»åŠ¿" }
                        ]
                    },
                    {
                        en: "It would end Republicansâ€™ lock on Congress and could set the stage for Mr Trumpâ€™s third impeachment.",
                        cn: "è¿™å°†ç»“æŸå…±å’Œå…šå¯¹å›½ä¼šçš„æ§åˆ¶ï¼Œå¹¶å¯èƒ½ä¸ºç‰¹æœ—æ™®å…ˆç”Ÿçš„ç¬¬ä¸‰æ¬¡å¼¹åŠ¾å¥ å®šåŸºç¡€ã€‚",
                        grammar: [
                            { type: "Verb", text: "end" },
                            { type: "Obj", text: "lock (control)" },
                            { type: "Verb Phrase", text: "set the stage for..." }
                        ],
                        vocab: [
                            { w: "lock on", m: "n. é”å®šï¼Œæ§åˆ¶" },
                            { w: "impeachment", m: "n. å¼¹åŠ¾" }
                        ]
                    },
                    {
                        en: "A welcome turn of events for the Democrats, then.",
                        cn: "é‚£ä¹ˆï¼Œå¯¹æ°‘ä¸»å…šæ¥è¯´ï¼Œè¿™æ˜¯ä¸€ä¸ªå¯å–œçš„è½¬æŠ˜ã€‚",
                        grammar: [{ type: "Fragment", text: "No verb (Nominal sentence)" }],
                        vocab: [{ w: "turn of events", m: "n. äº‹æ€çš„è½¬å˜" }]
                    },
                    {
                        en: "But the out-of-power party usually gains in the midterms.",
                        cn: "ä½†åœ¨é‡å…šé€šå¸¸ä¼šåœ¨ä¸­æœŸé€‰ä¸¾ä¸­è·èƒœã€‚",
                        grammar: [
                            { type: "Subj", text: "the out-of-power party" },
                            { type: "Verb", text: "gains (seats/power)" }
                        ],
                        vocab: [
                            { w: "out-of-power", m: "adj. åœ¨é‡çš„ï¼Œå¤±å»æƒåŠ›çš„" }
                        ]
                    },
                    {
                        en: "Democratsâ€™ longer-term fortunes will depend on who becomes their standard-bearer and eventual candidate in the 2028 presidential contest.",
                        cn: "æ°‘ä¸»å…šçš„é•¿æœŸå‘½è¿å°†å–å†³äºè°æˆä¸ºä»–ä»¬åœ¨2028å¹´å¤§é€‰ä¸­çš„é¢†å†›äººç‰©å’Œæœ€ç»ˆå€™é€‰äººã€‚",
                        grammar: [
                            { type: "Subj", text: "Democraticâ€™s... fortunes" },
                            { type: "Verb", text: "depend on" },
                            { type: "Obj Clause", text: "who becomes their standard-bearer..." }
                        ],
                        vocab: [
                            { w: "fortune", m: "n. å‘½è¿ï¼Œè¿åŠ¿" },
                            { w: "standard-bearer", m: "n. é¢†å†›äººç‰©ï¼Œæ——æ‰‹" },
                            { w: "contest", m: "n. ç«èµ›ï¼Œç«é€‰" }
                        ]
                    },
                    {
                        en: "Potential frontrunners include governors such as J.B. Pritzker in Illinois or Gavin Newsom in California.",
                        cn: "æ½œåœ¨çš„é¢†è·‘è€…åŒ…æ‹¬ä¼Šåˆ©è¯ºä¼Šå·å·é•¿J.B.æ™®åˆ©å…¹å…‹æˆ–åŠ åˆ©ç¦å°¼äºšå·å·é•¿åŠ æ–‡Â·çº½æ£®ã€‚",
                        grammar: [],
                        vocab: [
                            { w: "frontrunner", m: "n. é¢†è·‘è€…ï¼Œçƒ­é—¨å€™é€‰äºº" }
                        ]
                    },
                    {
                        en: "To succeed, the party will need to work out why voters still trust Republicans more on some of the most salient issues, including crime, immigration and the economy.",
                        cn: "ä¸ºäº†å–å¾—æˆåŠŸï¼Œè¯¥å…šéœ€è¦å¼„æ¸…æ¥šä¸ºä»€ä¹ˆé€‰æ°‘åœ¨çŠ¯ç½ªã€ç§»æ°‘å’Œç»æµç­‰æœ€çªå‡ºçš„é—®é¢˜ä¸Šä»ç„¶æ›´ä¿¡ä»»å…±å’Œå…šã€‚",
                        grammar: [
                            { type: "Adverbial", text: "To succeed (Purpose)" },
                            { type: "Verb", text: "work out (figure out)" },
                            { type: "Obj Clause", text: "why voters still trust..." }
                        ],
                        vocab: [
                            { w: "salient", m: "adj. æ˜¾è‘—çš„ï¼Œçªå‡ºçš„" }
                        ]
                    }
                ]
            },
            {
                topic: "Mass Deportation Campaign",
                sentences: [
                    {
                        en: "Mass deportation was never going to be achieved in one year.",
                        cn: "å¤§è§„æ¨¡é©±é€å‡ºå¢ƒç»ä¸å¯èƒ½åœ¨ä¸€å¹´å†…å®Œæˆã€‚",
                        grammar: [
                            { type: "Passive", text: "was... achieved" }
                        ],
                        vocab: [
                            { w: "deportation", m: "n. é©±é€å‡ºå¢ƒ" }
                        ]
                    },
                    {
                        en: "The money and manpower required to round up thousands, let alone millions, of illegal immigrants would take time to secure.",
                        cn: "å›´æ•æˆåƒä¸Šä¸‡ã€æ›´ä¸ç”¨è¯´æ•°ç™¾ä¸‡éæ³•ç§»æ°‘æ‰€éœ€çš„èµ„é‡‘å’ŒäººåŠ›éœ€è¦æ—¶é—´æ¥ç­¹é›†ã€‚",
                        grammar: [
                            { type: "Subj", text: "money and manpower" },
                            { type: "Modifier", text: "required to round up... (Past Part)" },
                            { type: "Verb", text: "take" },
                            { type: "Obj", text: "time" }
                        ],
                        vocab: [
                            { w: "round up", m: "v. å›´æ•ï¼Œé›†ç»“" },
                            { w: "let alone", m: "phr. æ›´ä¸ç”¨è¯´" },
                            { w: "secure", m: "v. è·å¾—ï¼Œç¡®ä¿" }
                        ]
                    },
                    {
                        en: "But Donald Trumpâ€™s first year in office has laid the groundwork.",
                        cn: "ä½†å”çº³å¾·Â·ç‰¹æœ—æ™®ä¸Šä»»çš„ç¬¬ä¸€å¹´å·²ç»å¥ å®šäº†åŸºç¡€ã€‚",
                        grammar: [
                            { type: "Verb Phrase", text: "laid the groundwork" }
                        ],
                        vocab: [
                            { w: "groundwork", m: "n. åŸºç¡€å·¥ä½œ" }
                        ]
                    },
                    {
                        en: "And in 2026 a dollop of cash from the One Big Beautiful Bill Act will fund more immigration agents, detention centres and surveillance technology.",
                        cn: "2026å¹´ï¼Œæ¥è‡ªâ€œä¸€é¡¹å¤§è€Œç¾çš„æ³•æ¡ˆâ€çš„ä¸€ç¬”èµ„é‡‘å°†èµ„åŠ©æ›´å¤šçš„ç§»æ°‘ä»£ç†äººã€æ‹˜ç•™ä¸­å¿ƒå’Œç›‘æ§æŠ€æœ¯ã€‚",
                        grammar: [
                            { type: "Subj", text: "a dollop of cash" },
                            { type: "Verb", text: "fund" },
                            { type: "Obj", text: "agents, centres, technology" }
                        ],
                        vocab: [
                            { w: "dollop", m: "n. ä¸€å›¢ï¼Œä¸€å—ï¼ˆå°‘é‡/ä¸€ç¬”ï¼‰" },
                            { w: "detention", m: "n. æ‹˜ç•™" },
                            { w: "surveillance", m: "n. ç›‘æ§" }
                        ]
                    },
                    {
                        en: "That means the deportation campaign will probably accelerate.",
                        cn: "è¿™æ„å‘³ç€é©±é€è¡ŒåŠ¨å¯èƒ½ä¼šåŠ é€Ÿã€‚",
                        grammar: [
                            { type: "Verb", text: "accelerate" }
                        ],
                        vocab: [
                            { w: "accelerate", m: "v. åŠ é€Ÿ" }
                        ]
                    },
                    {
                        en: "But two factors could yet convince the president to ease up.",
                        cn: "ä½†è¿™æœ‰ä¸¤ä¸ªå› ç´ å¯èƒ½ä¼šè¯´æœæ€»ç»Ÿæ”¾æ¾ã€‚",
                        grammar: [
                            { type: "Verb", text: "convince" },
                            { type: "Obj", text: "president" },
                            { type: "Comp", text: "to ease up" }
                        ],
                        vocab: [
                            { w: "ease up", m: "v. æ”¾æ¾ï¼Œç¼“å’Œ" }
                        ]
                    },
                    {
                        en: "First is potential pressure from businesses.",
                        cn: "é¦–å…ˆæ˜¯æ¥è‡ªä¼ä¸šçš„æ½œåœ¨å‹åŠ›ã€‚",
                        grammar: [], vocab: []
                    },
                    {
                        en: "Bosses in industries such as farming or tourism fear a labour shock.",
                        cn: "å†œä¸šæˆ–æ—…æ¸¸ä¸šçš„è€æ¿ä»¬æ‹…å¿ƒåŠ³åŠ¨åŠ›å†²å‡»ã€‚",
                        grammar: [
                            { type: "Subj", text: "Bosses" },
                            { type: "Mod", text: "in industries..." },
                            { type: "Verb", text: "fear" }
                        ],
                        vocab: [
                            { w: "labour shock", m: "n. åŠ³åŠ¨åŠ›å†²å‡»/çŸ­ç¼º" }
                        ]
                    },
                    {
                        en: "Second is public opinion.",
                        cn: "å…¶æ¬¡æ˜¯å…¬ä¼—èˆ†è®ºã€‚",
                        grammar: [], vocab: []
                    },
                    {
                        en: "Approval for Mr Trumpâ€™s handling of immigration has plunged since he took office.",
                        cn: "è‡ªä¸Šä»»ä»¥æ¥ï¼Œç‰¹æœ—æ™®å¤„ç†ç§»æ°‘é—®é¢˜çš„æ”¯æŒç‡å¤§å¹…ä¸‹é™ã€‚",
                        grammar: [
                            { type: "Subj", text: "Approval" },
                            { type: "Verb", text: "has plunged" }
                        ],
                        vocab: [
                            { w: "plunge", m: "v. éª¤é™" }
                        ]
                    },
                    {
                        en: "Americans favour deporting criminals, but do not like to see masked agents shoving people into unmarked vans.",
                        cn: "ç¾å›½äººæ”¯æŒé©±é€ç½ªçŠ¯ï¼Œä½†ä¸å–œæ¬¢çœ‹åˆ°è’™é¢ç‰¹å·¥å°†äººæ¨å…¥æ— æ ‡è®°çš„é¢åŒ…è½¦ã€‚",
                        grammar: [
                            { type: "Verb 1", text: "favour" },
                            { type: "Obj 1", text: "deporting criminals" },
                            { type: "Verb 2", text: "do not like" },
                            { type: "Obj 2", text: "to see..." }
                        ],
                        vocab: [
                            { w: "shove", m: "v. æ¨æŒ¤" }
                        ]
                    },
                    {
                        en: "Republicans up for re-election in Novemberâ€™s midterm elections might campaign less relentlessly for deportations than before.",
                        cn: "é¢ä¸´11æœˆä¸­æœŸé€‰ä¸¾è¿ä»»çš„å…±å’Œå…šäººå¯èƒ½ä¼šåœ¨é©±é€å‡ºå¢ƒé—®é¢˜ä¸Šä¸é‚£ä¹ˆæ— æƒ…åœ°è¿›è¡Œç«é€‰æ´»åŠ¨ã€‚",
                        grammar: [
                            { type: "Subj", text: "Republicans" },
                            { type: "Mod", text: "up for re-election (é¢ä¸´è¿ä»»)" },
                            { type: "Verb", text: "campaign" },
                            { type: "Adv", text: "less relentlessly" }
                        ],
                        vocab: [
                            { w: "relentlessly", m: "adv. æŒç»­ä¸æ–­åœ°ï¼Œæ— æƒ…åœ°" }
                        ]
                    }
                ]
            },
            {
                topic: "President & Supreme Court",
                sentences: [
                    {
                        en: "Since Donald Trump returned to office, the Supreme Court has largelyâ€”with the significant exceptions of a National Guard deployment and a deportation caseâ€”blessed his agenda.",
                        cn: "è‡ªå”çº³å¾·Â·ç‰¹æœ—æ™®é‡è¿”åŠå…¬å®¤ä»¥æ¥ï¼Œæœ€é«˜æ³•é™¢åœ¨å¾ˆå¤§ç¨‹åº¦ä¸Šæ”¯æŒäº†ä»–çš„è®®ç¨‹ï¼ˆé™¤å›½æ°‘è­¦å«é˜Ÿéƒ¨ç½²å’Œé©±é€å‡ºå¢ƒæ¡ˆä»¶ç­‰é‡å¤§ä¾‹å¤–ï¼‰ã€‚",
                        grammar: [
                            { type: "Adv Clause", text: "Since... returned..." },
                            { type: "Subj", text: "Supreme Court" },
                            { type: "Verb", text: "has blessed (æ”¯æŒ/èµç¦)" },
                            { type: "Obj", text: "agenda" }
                        ],
                        vocab: [
                            { w: "bless", m: "v. æ”¯æŒï¼Œå‡†è®¸ (metaphorical)" },
                            { w: "agenda", m: "n. è®®ç¨‹" }
                        ]
                    },
                    {
                        en: "It has let him ban transgender soldiers from the armed forces, gut the Department of Education and rescind protections for more than 1m migrants.",
                        cn: "å®ƒå…è®¸ä»–ç¦æ­¢å˜æ€§å£«å…µå‚å†›ï¼Œæç©ºæ•™è‚²éƒ¨ï¼Œå¹¶æ’¤é”€å¯¹è¶…è¿‡100ä¸‡ç§»æ°‘çš„ä¿æŠ¤ã€‚",
                        grammar: [
                            { type: "Verb", text: "let" },
                            { type: "Obj", text: "him" },
                            { type: "Comp 1", text: "ban..." },
                            { type: "Comp 2", text: "gut..." },
                            { type: "Comp 3", text: "rescind..." }
                        ],
                        vocab: [
                            { w: "gut", m: "v. æç©ºï¼Œç ´åå†…éƒ¨" },
                            { w: "rescind", m: "v. æ’¤é”€ï¼ŒåºŸé™¤" }
                        ]
                    },
                    {
                        en: "But these judgments have come on the courtâ€™s â€œemergencyâ€ or â€œshadowâ€ docket that produces interim rulings.",
                        cn: "ä½†è¿™äº›åˆ¤å†³æ¥è‡ªäºæ³•é™¢çš„â€œç´§æ€¥â€æˆ–â€œå½±å­â€æ¡ˆå·ï¼Œäº§ç”Ÿçš„åªæ˜¯ä¸´æ—¶è£å†³ã€‚",
                        grammar: [
                            { type: "Prep Phrase", text: "on the... docket" },
                            { type: "Clause", text: "that produces interim rulings" }
                        ],
                        vocab: [
                            { w: "docket", m: "n. å¾…å®¡æ¡ˆä»¶è¡¨" },
                            { w: "interim", m: "adj. ä¸´æ—¶çš„ï¼Œè¿‡æ¸¡çš„" }
                        ]
                    },
                    {
                        en: "Several weighty questions are returning as slower-moving â€œmeritsâ€ cases, which result in a final judgment.",
                        cn: "å‡ ä¸ªé‡å¤§é—®é¢˜æ­£ä½œä¸ºè¿›å±•è¾ƒæ…¢çš„â€œå®è´¨æ€§â€æ¡ˆä»¶å›å½’ï¼Œè¿™äº›æ¡ˆä»¶å°†äº§ç”Ÿæœ€ç»ˆåˆ¤å†³ã€‚",
                        grammar: [
                            { type: "Subj", text: "Several weighty questions" },
                            { type: "Verb", text: "are returning" },
                            { type: "Prep", text: "as... cases" }
                        ],
                        vocab: [
                            { w: "weighty", m: "adj. é‡å¤§çš„ï¼Œæœ‰åˆ†é‡çš„" },
                            { w: "merits", m: "n. (æ³•å¾‹)å®è´¨ï¼Œæ˜¯éæ›²ç›´" }
                        ]
                    },
                    {
                        en: "When the court issues rulings in 2026, the president will find reasons to cheerâ€”and a few to jeer.",
                        cn: "å½“æ³•é™¢åœ¨2026å¹´å‘å¸ƒè£å†³æ—¶ï¼Œæ€»ç»Ÿä¼šæ‰¾åˆ°æ¬¢å‘¼çš„ç†ç”±ï¼Œä¹Ÿä¼šæœ‰ä¸€äº›å˜²ç¬‘çš„ç†ç”±ã€‚",
                        grammar: [
                            { type: "Clause", text: "When... issues rulings" },
                            { type: "Verb", text: "find" },
                            { type: "Obj", text: "reasons to cheer/jeer" }
                        ],
                        vocab: [
                            { w: "issue", m: "v. å‘å¸ƒ" },
                            { w: "jeer", m: "v. å˜²ç¬‘ï¼Œå˜˜" }
                        ]
                    },
                    {
                        en: "His biggest wins could include the court formally blessing many of his attempts to sack government officials and employees.",
                        cn: "ä»–æœ€å¤§çš„èƒœåˆ©å¯èƒ½åŒ…æ‹¬æ³•é™¢æ­£å¼æ‰¹å‡†ä»–è§£é›‡æ”¿åºœå®˜å‘˜å’Œé›‡å‘˜çš„è®¸å¤šå°è¯•ã€‚",
                        grammar: [
                            { type: "Verb", text: "could include" },
                            { type: "Gerund Phrase", text: "the court formally blessing..." }
                        ],
                        vocab: [
                            { w: "sack", m: "v. è§£é›‡" }
                        ]
                    },
                    {
                        en: "As for the losses, the court will probably uphold the 14th Amendmentâ€™s guarantee of birthright citizenship, which Mr Trump tried to rescind in an executive order.",
                        cn: "è‡³äºæŸå¤±ï¼Œæ³•é™¢å¯èƒ½ä¼šç»´æŒç¬¬14ä¿®æ­£æ¡ˆå…³äºå‡ºç”Ÿå…¬æ°‘æƒçš„ä¿éšœï¼Œè¿™æ˜¯ç‰¹æœ—æ™®æ›¾è¯•å›¾é€šè¿‡è¡Œæ”¿å‘½ä»¤æ’¤é”€çš„ã€‚",
                        grammar: [
                            { type: "Verb", text: "uphold" },
                            { type: "Obj", text: "guarantee" },
                            { type: "Clause", text: "which Mr Trump tried to rescind..." }
                        ],
                        vocab: [
                            { w: "uphold", m: "v. ç»´æŒï¼Œæ”¯æŒ(è£å†³)" },
                            { w: "birthright citizenship", m: "n. å‡ºç”Ÿå…¬æ°‘æƒ" }
                        ]
                    },
                    {
                        en: "Meanwhile a ruling on his tariffs is expected in early 2026: a majority of justices expressed scepticism about their legality in oral arguments in November.",
                        cn: "ä¸æ­¤åŒæ—¶ï¼Œé¢„è®¡å°†äº2026å¹´åˆå¯¹ä»–çš„å…³ç¨ä½œå‡ºè£å†³ï¼šå¤šæ•°æ³•å®˜åœ¨11æœˆçš„å£å¤´è¾©è®ºä¸­å¯¹å…¶åˆæ³•æ€§è¡¨ç¤ºæ€€ç–‘ã€‚",
                        grammar: [
                            { type: "Passive", text: "is expected" },
                            { type: "Subj 2", text: "majority of justices" },
                            { type: "Verb 2", text: "expressed scepticism" }
                        ],
                        vocab: [
                            { w: "scepticism", m: "n. æ€€ç–‘ (US: skepticism)" },
                            { w: "legality", m: "n. åˆæ³•æ€§" }
                        ]
                    }
                ]
            },
            {
                topic: "America's Big Birthday",
                sentences: [
                    {
                        en: "In July America will celebrate its 250th birthday.",
                        cn: "7æœˆï¼Œç¾å›½å°†åº†ç¥å…¶250å²ç”Ÿæ—¥ã€‚",
                        grammar: [], vocab: []
                    },
                    {
                        en: "The coming year will feature parades, fireworks and, curiously, an Ultimate Fighting Championship bout at the White House.",
                        cn: "æ¥å¹´å°†ä»¥æ¸¸è¡Œã€çƒŸèŠ±ä¸ºç‰¹è‰²ï¼Œå¥‡æ€ªçš„æ˜¯ï¼Œè¿˜æœ‰åœ¨ç™½å®«ä¸¾è¡Œçš„ç»ˆææ ¼æ–—å† å†›èµ›ï¼ˆUFCï¼‰ã€‚",
                        grammar: [
                            { type: "Verb", text: "feature (have as feature)" },
                            { type: "Obj", text: "parades, fireworks... bout" }
                        ],
                        vocab: [
                            { w: "feature", m: "v. ä»¥...ä¸ºç‰¹è‰²" },
                            { w: "curiously", m: "adv. å¥‡æ€ªåœ°" },
                            { w: "bout", m: "n. å›åˆï¼Œæ¯”èµ›" }
                        ]
                    },
                    {
                        en: "The celebrations will be a sign of Americaâ€™s political divisions.",
                        cn: "åº†ç¥æ´»åŠ¨å°†æ˜¯ç¾å›½æ”¿æ²»åˆ†è£‚çš„ä¸€ä¸ªæ ‡å¿—ã€‚",
                        grammar: [
                            { type: "Verb", text: "be" },
                            { type: "Comp", text: "a sign of divisions" }
                        ],
                        vocab: [
                            { w: "division", m: "n. åˆ†è£‚" }
                        ]
                    },
                    {
                        en: "Two rival commissions are planning events.",
                        cn: "ä¸¤ä¸ªå¯¹ç«‹çš„å§”å‘˜ä¼šæ­£åœ¨ç­–åˆ’æ´»åŠ¨ã€‚",
                        grammar: [], vocab: []
                    },
                    {
                        en: "The â€œAmerica250 Commissionâ€ was created by Congress in 2016 and aspires to a nonpartisan representation of the American story.",
                        cn: "â€œç¾å›½250å§”å‘˜ä¼šâ€ç”±å›½ä¼šäº2016å¹´åˆ›å»ºï¼Œæ—¨åœ¨å¯¹ç¾å›½æ•…äº‹è¿›è¡Œæ— å…šæ´¾çš„å‘ˆç°ã€‚",
                        grammar: [
                            { type: "Passive", text: "was created" },
                            { type: "Verb 2", text: "aspires to" },
                            { type: "Obj 2", text: "nonpartisan representation" }
                        ],
                        vocab: [
                            { w: "aspire to", m: "v. ç«‹å¿—äºï¼Œè¿½æ±‚" },
                            { w: "nonpartisan", m: "adj. æ— å…šæ´¾çš„ï¼Œå®¢è§‚çš„" }
                        ]
                    },
                    {
                        en: "â€œTask Force 250â€ was established by Donald Trump to â€œhonour the history of our great nationâ€.",
                        cn: "â€œ250å·¥ä½œç»„â€ç”±å”çº³å¾·Â·ç‰¹æœ—æ™®å»ºç«‹ï¼Œæ—¨åœ¨â€œçºªå¿µæˆ‘ä»¬ä¼Ÿå¤§å›½å®¶çš„å†å²â€ã€‚",
                        grammar: [
                            { type: "Passive", text: "was established" },
                            { type: "Infinitive", text: "to honour... (Purpose)" }
                        ],
                        vocab: [
                            { w: "task force", m: "n. ç‰¹åˆ«å·¥ä½œç»„" }
                        ]
                    },
                    {
                        en: "The past has become a partisan battleground.",
                        cn: "è¿‡å»å·²æˆä¸ºå…šæ´¾æ–—äº‰çš„æˆ˜åœºã€‚",
                        grammar: [
                            { type: "Verb", text: "has become" },
                            { type: "Comp", text: "partisan battleground" }
                        ],
                        vocab: [
                            { w: "partisan", m: "adj. å…šæ´¾çš„ï¼Œåè¢’çš„" },
                            { w: "battleground", m: "n. æˆ˜åœº" }
                        ]
                    },
                    {
                        en: "To Mr Trump, it is the left that struck first, toppling statues of historical figures such as Confederate generals.",
                        cn: "å¯¹ç‰¹æœ—æ™®æ¥è¯´ï¼Œæ˜¯å·¦æ´¾é¦–å…ˆå‘éš¾ï¼Œæ¨å€’äº†å—éƒ¨é‚¦è”å°†å†›ç­‰å†å²äººç‰©çš„é›•åƒã€‚",
                        grammar: [
                            { type: "Prep", text: "To Mr Trump" },
                            { type: "Cleft Sentence", text: "it is the left that struck first (å¼ºè°ƒå¥)" },
                            { type: "Modifier", text: "toppling statues... (ä¼´éšçŠ¶è¯­)" }
                        ],
                        vocab: [
                            { w: "strike", m: "v. æ‰“å‡»ï¼Œæ”»å‡» (struck)" },
                            { w: "topple", m: "v. æ¨å€’" },
                            { w: "Confederate", m: "adj. å—éƒ¨é‚¦è”çš„(å†…æˆ˜)" }
                        ]
                    },
                    {
                        en: "In March he signed an executive order that complained of a â€œconcertedâ€ effort to â€œrewriteâ€ Americaâ€™s history to foster â€œa sense of national shameâ€.",
                        cn: "ä»Šå¹´3æœˆï¼Œä»–ç­¾ç½²äº†ä¸€é¡¹è¡Œæ”¿å‘½ä»¤ï¼ŒæŠ±æ€¨æœ‰äººâ€œååŒâ€åŠªåŠ›â€œé‡å†™â€ç¾å›½å†å²ï¼Œä»¥åŸ¹å…»â€œæ°‘æ—è€»è¾±æ„Ÿâ€ã€‚",
                        grammar: [
                            { type: "Verb", text: "signed" },
                            { type: "Obj", text: "executive order" },
                            { type: "Clause", text: "that complained of... (Rel Clause)" }
                        ],
                        vocab: [
                            { w: "executive order", m: "n. è¡Œæ”¿å‘½ä»¤" },
                            { w: "concerted", m: "adj. ååŒçš„ï¼Œä¸€è‡´çš„" },
                            { w: "foster", m: "v. åŸ¹å…»" }
                        ]
                    },
                    {
                        en: "It called on officials to audit how the American story is told at federal historical sites and museums.",
                        cn: "å®ƒå‘¼åå®˜å‘˜ä»¬å®¡æŸ¥è”é‚¦å†å²é—å€å’Œåšç‰©é¦†å¦‚ä½•è®²è¿°ç¾å›½æ•…äº‹ã€‚",
                        grammar: [
                            { type: "Verb", text: "called on (å‘¼å)" },
                            { type: "Obj", text: "officials" },
                            { type: "Comp", text: "to audit..." },
                            { type: "Clause", text: "how the American story is told" }
                        ],
                        vocab: [
                            { w: "audit", m: "v. å®¡æŸ¥ï¼Œå®¡è®¡" }
                        ]
                    },
                    {
                        en: "Big anniversaries once provided moments of unity.",
                        cn: "é‡å¤§çºªå¿µæ—¥æ›¾ç»æä¾›å›¢ç»“çš„æ—¶åˆ»ã€‚",
                        grammar: [], vocab: []
                    },
                    {
                        en: "Now that looks less likely.",
                        cn: "ç°åœ¨çœ‹æ¥ä¸å¤ªå¯èƒ½äº†ã€‚",
                        grammar: [
                            { type: "Subj", text: "that" },
                            { type: "Link Verb", text: "looks" },
                            { type: "Comp", text: "less likely" }
                        ],
                        vocab: []
                    }
                ]
            }
        ];

        // --- Render Logic ---

        const container = document.getElementById('article-container');
        const emptyState = document.getElementById('empty-state');
        const analysisContent = document.getElementById('analysis-content');

        const analysisCn = document.getElementById('analysis-cn');
        const analysisGrammar = document.getElementById('analysis-grammar');
        const analysisVocab = document.getElementById('analysis-vocab');

        const audioProgress = document.getElementById('audio-progress');
        const mainAudioBtn = document.getElementById('main-audio-btn');

        let currentAudio = null;
        const audioPrefixes = ['china', 'warner', 'iran', 'un', 'guinea', 'india', 'buffett', 'figure', 'dems', 'deport', 'court', 'bday'];

        // Topic Images Mapping
        const topicImages = {
            0: { src: 'images/china_growth.png', alt: 'China Shanghai skyline with 5% GDP growth' },
            2: { src: 'images/iran_currency.jpg', alt: 'Iran currency crisis illustration' },
            3: { src: 'images/un_building.png', alt: 'UN Headquarters with budget visualization' },
            4: { src: 'images/guinea_election.jpg', alt: 'Guinea military election artwork' },
            5: { src: 'images/steel_india.jpg', alt: 'Molten steel production' },
            6: { src: 'images/buffett.png', alt: 'Warren Buffett portrait' },
            8: { src: 'images/politics_wave.jpg', alt: 'Political wave visualization' },
            10: { src: 'images/politics_chess.jpg', alt: 'Democrat vs Republican political chess' },
            11: { src: 'images/america_250.jpg', alt: 'America 250th anniversary celebration' }
        };

        function renderArticle() {
            const container = document.getElementById('article-container');
            container.innerHTML = ''; // Clear previous content

            // 1. Render Sections
            articleSections.forEach((section, sectionIdx) => {
                // Create Wrapper for Topic
                const sectionDiv = document.createElement('div');
                sectionDiv.id = `topic-${sectionIdx}`;
                sectionDiv.className = 'topic-section mb-16 relative group/section transform transition-all duration-500 hover:translate-x-1';

                // Topic Image (if available)
                if (topicImages[sectionIdx]) {
                    const imgWrapper = document.createElement('div');
                    imgWrapper.className = 'relative mb-6 rounded-2xl overflow-hidden shadow-lg group/img cursor-pointer';
                    imgWrapper.innerHTML = `
                        <img src="${topicImages[sectionIdx].src}" alt="${topicImages[sectionIdx].alt}" 
                             class="w-full h-48 md:h-64 object-cover transition-transform duration-700 group-hover/img:scale-110">
                        <div class="absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent opacity-0 group-hover/img:opacity-100 transition-opacity duration-300"></div>
                        <div class="absolute bottom-4 left-4 text-white opacity-0 group-hover/img:opacity-100 transition-all duration-300 transform translate-y-2 group-hover/img:translate-y-0">
                            <span class="text-xs bg-white/20 backdrop-blur-sm px-3 py-1 rounded-full">ğŸ“· Visual Context</span>
                        </div>
                    `;
                    imgWrapper.onclick = () => {
                        imgWrapper.querySelector('img').classList.toggle('scale-150');
                    };
                    sectionDiv.appendChild(imgWrapper);
                }

                // Section Header
                if (section.topic) {
                    const h2 = document.createElement('h2');
                    h2.className = 'text-2xl font-sans font-bold text-slate-100 mb-6 border-l-4 border-violet-500 pl-4 drop-shadow-sm sticky top-0 bg-[#0B1120]/90 backdrop-blur-md py-4 z-10 rounded-r-xl transition-all duration-300 hover:border-l-8 hover:pl-6 hover:border-violet-400';
                    h2.innerHTML = `<span class="inline-flex items-center gap-2">${section.topic} <span class="text-sm font-normal text-violet-400 opacity-0 group-hover/section:opacity-100 transition-opacity">â–¶</span></span>`;
                    sectionDiv.appendChild(h2);
                }

                // Paragraph Text
                const p = document.createElement('p');
                p.className = 'mb-8 text-lg text-slate-300 leading-loose';

                section.sentences.forEach((sent, sIdx) => {
                    const span = document.createElement('span');
                    span.className = 'sentence-span cursor-pointer hover:bg-gradient-to-r hover:from-news-accent/10 hover:to-transparent transition-all duration-300 rounded-lg px-2 py-1 -mx-1 hover:shadow-sm border-b-2 border-transparent hover:border-news-accent/30';
                    span.innerText = sent.en + ' ';
                    span.setAttribute('data-sentence-idx', `${sectionIdx}-${sIdx}`);

                    // Construct Audio ID
                    const audioId = `${audioPrefixes[sectionIdx]}_${sectionIdx}_${sIdx}`;

                    span.onclick = () => activateSentence(span, sent, audioId);

                    p.appendChild(span);
                });
                sectionDiv.appendChild(p);

                // Inline Widget Container (Grid)
                const widgetContainer = document.createElement('div');
                widgetContainer.id = `widgets-${sectionIdx}`;
                widgetContainer.className = 'grid grid-cols-1 md:grid-cols-2 gap-6 mt-6 pl-4 border-l-2 border-dashed border-violet-500/20 transition-all duration-500';
                sectionDiv.appendChild(widgetContainer);

                container.appendChild(sectionDiv);
            });

            // Add scroll reveal animation
            const sections = document.querySelectorAll('.topic-section');
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('animate-fadeInUp');
                        entry.target.style.opacity = '1';
                        entry.target.style.transform = 'translateY(0)';
                    }
                });
            }, { threshold: 0.1 });

            sections.forEach(section => {
                section.style.opacity = '0';
                section.style.transform = 'translateY(20px)';
                section.style.transition = 'all 0.6s ease-out';
                observer.observe(section);
            });
        }

        function activateSentence(element, data, audioId) {
            // UI State
            document.querySelectorAll('.sentence-span').forEach(el => el.classList.remove('active'));
            element.classList.add('active');

            // Desktop: show sidebar panel
            if (window.innerWidth >= 768) {
                emptyState.classList.add('hidden');
                analysisContent.classList.remove('hidden');
                analysisContent.classList.add('flex');
            } else {
                // Mobile: show modal popup with audio ID
                currentMobileAudioId = audioId;
                showMobileModal(data);
            }

            // Populate Content
            analysisCn.innerText = data.cn;

            // Grammar
            analysisGrammar.innerHTML = '';
            if (data.grammar && data.grammar.length > 0) {
                data.grammar.forEach(g => {
                    const div = document.createElement('div');
                    div.className = 'bg-blue-500/10 p-3 rounded-lg border border-blue-500/20 hover:border-blue-400/40 transition shadow-sm';
                    div.innerHTML = `<span class="text-xs font-bold text-blue-400 uppercase tracking-wide mr-2 bg-blue-500/20 px-2 py-0.5 rounded">${g.type}</span> <span class="text-slate-200 font-medium">${g.text}</span>`;
                    analysisGrammar.appendChild(div);
                });
            } else {
                analysisGrammar.innerHTML = '<span class="text-gray-400 italic text-sm">Simple structure.</span>';
            }

            // Vocab
            analysisVocab.innerHTML = '';
            if (data.vocab && data.vocab.length > 0) {
                data.vocab.forEach(v => {
                    const div = document.createElement('div');
                    div.className = 'flex items-start gap-3 group';
                    div.innerHTML = `
                        <div class="w-1.5 h-1.5 rounded-full bg-violet-500 mt-2 flex-shrink-0 shadow-[0_0_8px_rgba(139,92,246,0.4)]"></div>
                        <div>
                            <p class="font-bold text-slate-100 border-b border-violet-500/30 inline-block mb-1 group-hover:border-violet-400 transition">${v.w}</p>
                            <p class="text-sm text-slate-400">${v.m}</p>
                        </div>
                    `;
                    analysisVocab.appendChild(div);
                });
            } else {
                analysisVocab.innerHTML = '<span class="text-gray-400 italic text-sm">No advanced vocabulary.</span>';
            }

            // Audio Setup
            setupAudio(audioId);
        }

        function setupAudio(audioId) {
            if (currentAudio) {
                currentAudio.pause();
                currentAudio = null;
            }

            const audioPath = `audio/news_2026/${audioId}.mp3`;
            const audio = new Audio(audioPath);
            currentAudio = audio;

            // Reset UI
            mainAudioBtn.innerHTML = '<span class="material-symbols-rounded text-2xl">play_arrow</span>';
            audioProgress.style.width = '0%';
            mainAudioBtn.onclick = () => toggleAudio(audio);

            audio.ontimeupdate = () => {
                const percent = (audio.currentTime / audio.duration) * 100;
                audioProgress.style.width = `${percent}%`;
            };

            audio.onended = () => {
                mainAudioBtn.innerHTML = '<span class="material-symbols-rounded text-2xl">play_arrow</span>';
            };
        }

        function toggleAudio(audio) {
            if (audio.paused) {
                audio.play();
                mainAudioBtn.innerHTML = '<span class="material-symbols-rounded text-2xl">pause</span>';
            } else {
                audio.pause();
                mainAudioBtn.innerHTML = '<span class="material-symbols-rounded text-2xl">play_arrow</span>';
            }
        }

        // --- Data Visualization Logic ---

        // --- Data Visualization Logic ---

        function renderInlineWidgets() {

            // --- 22 VISUALIZATION DATA POINTS (Mapped to Topics) ---
            const dataWidgets = [
                // Topic 0: China's Economy
                {
                    topicIdx: 0, type: 'gauge', label: "China 2025 GDP Target", value: 5.0, max: 8, unit: '%',
                    desc: "Growth Target Met: Yes", color: '#27ae60'
                },
                {
                    topicIdx: 0, type: 'chart-line-area', id: 'pmiChart', title: "China PMI Inflection Point",
                    labels: ['May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],
                    data: [49.5, 49.0, 49.3, 49.1, 49.8, 49.5, 49.4, 50.2],
                    color: '#e67e22', desc: "Dec broke 8-month contraction (>50)"
                },

                // Topic 1: Warner Bros vs Paramount
                {
                    topicIdx: 1, type: 'chart-bar-grouped', id: 'warnerBids', title: "Hollywood Bidding War ($bn)",
                    labels: ['Valuation'],
                    datasets: [
                        { label: 'Netflix Offer', data: [83], backgroundColor: '#e74c3c' },
                        { label: 'Paramount Bid', data: [108], backgroundColor: '#3498db' }
                    ],
                    desc: "Board favors Netflix despite lower bid"
                },
                {
                    topicIdx: 1, type: 'timeline-milestone', title: "Warner/Netflix/Paramount Timeline",
                    events: [
                        { date: 'Day 0', text: 'Nintendo Deal Announced' },
                        { date: 'Day +3', text: 'Paramount Swoops In ($108bn)' },
                        { date: 'Next Week', text: 'Board Final Decision' }
                    ]
                },

                // Topic 2: Iran Protests
                {
                    topicIdx: 2, type: 'chart-line', id: 'rialChart', title: "Iran Rial vs USD (Plunge)",
                    labels: ['2023', '2024', '2025', 'Jan 2026'],
                    data: [42000, 50000, 65000, 95000],
                    color: '#c0392b', desc: "Currency at historic low"
                },
                {
                    topicIdx: 2, type: 'thermometer', label: "Iran Inflation", value: 42, max: 60, unit: '%',
                    color: '#e74c3c', desc: "Hyper-inflation pressure"
                },

                // Topic 3: UN Budget Crisis
                {
                    topicIdx: 3, type: 'chart-doughnut', id: 'unBudget', title: "UN 2026 Budget Distribution",
                    labels: ['Approved ($3.45bn)', 'Cut (7%)'],
                    data: [93, 7],
                    colors: ['#3498db', '#bdc3c7'], desc: "Total slashed by $260m"
                },
                {
                    topicIdx: 3, type: 'chart-bar-horizontal', id: 'unArrears', title: "UN Funding Shortfall Contribution",
                    labels: ['USA Arrears', 'Rest of World'],
                    data: [1.4, 0.2],
                    colors: ['#c0392b', '#95a5a6'], desc: "US owes 87% of deficit"
                },

                // Topic 4: Guinea Election
                {
                    topicIdx: 4, type: 'progress-circle', label: "Guinea Election share", value: 86,
                    color: '#27ae60', desc: "Gen. Doumbouya's disputed win"
                },

                // Topic 5: India Steel Tariffs
                {
                    topicIdx: 5, type: 'chart-step', id: 'steelTariff', title: "India Steel Tariff Step-Down",
                    labels: ['Year 1', 'Year 2', 'Year 3'],
                    data: [12, 11.5, 11],
                    color: '#f39c12', desc: "Excludes Stainless Steel"
                },
                {
                    topicIdx: 5, type: 'treemap-simple', title: "Steel Stocks Reaction",
                    items: [
                        { label: 'Tata Steel', change: '+5.2%', color: '#2ecc71' },
                        { label: 'JSW Steel', change: '+4.8%', color: '#2ecc71' },
                        { label: 'Small Caps', change: '+1.2%', color: '#27ae60' }
                    ]
                },

                // Topic 6: Warren Buffett Steps Down
                {
                    topicIdx: 6, type: 'timeline-long', title: "Buffett's 60-Year Reign",
                    start: '1965 (Textile Mill)', end: '2026 (Global Titan)',
                    desc: "longest tenure of S&P 500 CEO"
                },
                {
                    topicIdx: 6, type: 'org-chart', title: "Berkshire Succession",
                    top: "Warren Buffett (Chairman)",
                    child: "Greg Abel (CEO)",
                    desc: "Effective Jan 1st"
                },

                // Topic 7: Figure of the Day
                {
                    topicIdx: 7, type: 'heatmap-lite', title: "LA Fire Damage Density",
                    value: "High", location: "Los Angeles County", count: "16,000 Buildings",
                    color: '#e74c3c'
                },

                // Topic 8: Politics: Democrats Step Up
                {
                    topicIdx: 8, type: 'parliament-sim', title: "2026 House Prediction",
                    dems: 220, reps: 215, desc: "Dems likely to retake majority"
                },
                {
                    topicIdx: 8, type: 'card-vs', title: "2028 Dem Frontrunners",
                    left: { name: 'J.B. Pritzker', role: 'IL Governor', tag: 'Wealth/Establishment' },
                    right: { name: 'Gavin Newsom', role: 'CA Governor', tag: 'Media/Policy' }
                },

                // Topic 9: Mass Deportation Campaign
                {
                    topicIdx: 9, type: 'fishbone-text', title: "Deportation Drivers",
                    head: "Mass Deportation",
                    bones: ['Funding (Bill Act)', 'Labor Shortage Fear', 'Public Opinion Drop'],
                },
                {
                    topicIdx: 9, type: 'chart-line', id: 'trumpApproval', title: "Immigration Approval Rating",
                    labels: ['Inauguration', 'Year 1', 'Year 2'],
                    data: [48, 42, 35],
                    color: '#e74c3c', desc: "Steady decline since taking office"
                },

                // Topic 10: President & Supreme Court
                {
                    topicIdx: 10, type: 'scoreboard', title: "SCOTUS 2026 Scorecard",
                    wins: ['Trans Ban', 'Dept of Ed Gutting', 'Official Firings'],
                    losses: ['Birthright Citizenship', 'Tariff Legality'],
                    desc: "Trump Agenda: Mixed Bag"
                },
                {
                    topicIdx: 10, type: 'funnel-text', title: "Judicial Process",
                    stages: ['Shadow Docket (Emergency)', 'Oral Arguments', 'Merits Ruling (Final)'],
                    desc: "Major cases moving to final stage"
                },

                // Topic 11: America's Big Birthday
                {
                    topicIdx: 11, type: 'venn-text', title: "America 250 Celebrations",
                    left: "Nonparisan Commission", right: "Trump's Task Force", center: "Conflict",
                    desc: "Battle over historical narrative"
                },
                {
                    topicIdx: 11, type: 'map-text', title: "Global Hotspots",
                    points: ['Beijing', 'Tehran', 'Washington', 'Conakry', 'Mumbai'],
                    desc: "Key locations in this report"
                }
            ];

            // --- RENDER LOOP ---
            dataWidgets.forEach((item, idx) => {
                // Find Inline Container
                const container = document.getElementById(`widgets-${item.topicIdx}`);
                if (!container) return;

                const card = document.createElement('div');
                card.className = 'glass-panel p-6 rounded-2xl flex flex-col justify-between hover:scale-[1.02] transition duration-300 border border-white/30 bg-white/40 shadow-sm group min-h-[220px]';

                // HEADER
                const headerHtml = item.label || item.title ? `
                    <div class="flex justify-between items-start mb-4 border-b border-black/5 pb-2">
                        <span class="text-xs font-bold uppercase tracking-wider text-news-dark/60">${item.label || item.title}</span>
                        <span class="material-symbols-rounded text-news-dark/20 text-lg">bar_chart</span>
                    </div>` : '';

                let uniqueContent = '';

                // --- WIDGET TYPES ---

                // 1. GAUGE / THERMOMETER (Simple Radial or Bar)
                if (item.type === 'gauge' || item.type === 'thermometer') {
                    const pct = (item.value / item.max) * 100;
                    const isGauge = item.type === 'gauge';
                    uniqueContent = `
                        <div class="flex-1 flex flex-col items-center justify-center relative">
                             ${isGauge
                            ? `<div class="w-32 h-16 overflow-hidden relative">
                                     <div class="absolute w-32 h-32 rounded-full border-[12px] border-black/10 border-b-0"></div>
                                     <div class="absolute w-32 h-32 rounded-full border-[12px] border-transparent border-t-${item.color === '#27ae60' ? 'green-500' : 'red-500'} origin-bottom transition-all duration-1000" style="transform: rotate(${pct * 1.8}deg)"></div>
                                   </div>`
                            : `<div class="w-8 h-32 bg-black/10 rounded-full relative overflow-hidden ring-4 ring-white/50">
                                     <div class="absolute bottom-0 w-full bg-red-500 transition-all duration-1000" style="height: ${pct}%"></div>
                                   </div>`
                        }
                             <div class="mt-4 text-3xl font-serif font-bold text-news-dark">${item.value}${item.unit || ''}</div>
                        </div>
                    `;
                }

                // 2. CHARTS (Chart.js)
                else if (item.type.startsWith('chart-')) {
                    const canvasId = `viz-${idx}`;
                    uniqueContent = `<div class="relative h-48 w-full"><canvas id="${canvasId}"></canvas></div>`;

                    setTimeout(() => {
                        const ctx = document.getElementById(canvasId).getContext('2d');
                        let config = {};

                        if (item.type === 'chart-line-area' || item.type === 'chart-line' || item.type === 'chart-step') {
                            config = {
                                type: 'line',
                                data: {
                                    labels: item.labels, datasets: [{
                                        label: item.title, data: item.data,
                                        borderColor: item.color, backgroundColor: item.color + '20',
                                        fill: item.type === 'chart-line-area', stepped: item.type === 'chart-step', tension: 0.3
                                    }]
                                },
                                options: { maintainAspectRatio: false, plugins: { legend: { display: false } }, scales: { x: { display: false }, y: { display: false } } }
                            };
                        } else if (item.type === 'chart-bar-grouped') {
                            config = {
                                type: 'bar',
                                data: { labels: item.labels, datasets: item.datasets },
                                options: { maintainAspectRatio: false, scales: { y: { beginAtZero: true } } }
                            };
                        } else if (item.type === 'chart-doughnut') {
                            config = {
                                type: 'doughnut',
                                data: { labels: item.labels, datasets: [{ data: item.data, backgroundColor: item.colors }] },
                                options: { maintainAspectRatio: false, plugins: { legend: { position: 'bottom', labels: { boxWidth: 10 } } } }
                            };
                        } else if (item.type === 'chart-bar-horizontal') {
                            config = {
                                type: 'bar',
                                data: { labels: item.labels, datasets: [{ data: item.data, backgroundColor: item.colors }] },
                                options: { indexAxis: 'y', maintainAspectRatio: false, plugins: { legend: { display: false } } }
                            };
                        }
                        new Chart(ctx, config);
                    }, 100);
                }

                // 3. SPECIAL WIDGETS (HTML/CSS)

                else if (item.type === 'timeline-milestone') {
                    uniqueContent = `<div class="space-y-4 relative pl-4 border-l-2 border-dashed border-news-dark/20">
                        ${item.events.map(e => `
                            <div class="relative">
                                <div class="absolute -left-[21px] w-3 h-3 bg-news-dark rounded-full ring-4 ring-white"></div>
                                <div class="text-xs font-bold text-news-accent">${e.date}</div>
                                <div class="text-sm font-medium text-news-dark">${e.text}</div>
                            </div>
                        `).join('')}
                    </div>`;
                }

                else if (item.type === 'treemap-simple') {
                    uniqueContent = `<div class="grid grid-cols-2 gap-2 h-full">
                        ${item.items.map((t, i) => `
                            <div class="${i === 0 ? 'col-span-2' : ''} bg-green-100 rounded p-2 flex flex-col justify-center items-center border border-green-200">
                                <div class="font-bold text-green-800">${t.label}</div>
                                <div class="text-xs text-green-600">${t.change}</div>
                            </div>
                        `).join('')}
                    </div>`;
                }

                else if (item.type === 'progress-circle') {
                    uniqueContent = `
                        <div class="flex items-center justify-center py-4">
                            <div class="relative w-32 h-32 rounded-full border-8 border-gray-200 flex items-center justify-center">
                                <div class="text-3xl font-bold text-news-dark">${item.value}%</div>
                                <svg class="absolute inset-0 w-full h-full -rotate-90"><circle cx="64" cy="64" r="58" stroke="${item.color}" stroke-width="8" fill="none" class="stroke-[8] dash-array-100" style="stroke-dasharray: 365; stroke-dashoffset: ${365 - (365 * item.value / 100)}"></circle></svg>
                            </div>
                        </div>
                    `;
                }

                else if (item.type === 'parliament-sim') {
                    uniqueContent = `
                        <div class="flex flex-col items-center">
                            <div class="flex gap-1 items-end h-24 mb-2">
                                <div class="w-16 bg-blue-600 rounded-t-lg h-full flex items-center justify-center text-white font-bold">Dems<br>${item.dems}</div>
                                <div class="w-1 bg-black/10 h-24"></div>
                                <div class="w-16 bg-red-600 rounded-t-lg h-[95%] flex items-center justify-center text-white font-bold opacity-60">Reps<br>${item.reps}</div>
                            </div>
                            <div class="text-center text-sm font-bold text-blue-600">Majority Flip</div>
                        </div>
                    `;
                }

                else if (item.type === 'card-vs') {
                    uniqueContent = `
                        <div class="flex justify-between items-center h-full">
                            <div class="text-center w-1/2 pr-2 border-r border-black/10">
                                <div class="text-2xl">ğŸ¦</div>
                                <div class="font-bold text-news-dark text-sm">${item.left.name}</div>
                                <div class="text-[10px] text-gray-500">${item.left.tag}</div>
                            </div>
                            <div class="text-center w-1/2 pl-2">
                                <div class="text-2xl">ğŸ»</div>
                                <div class="font-bold text-news-dark text-sm">${item.right.name}</div>
                                <div class="text-[10px] text-gray-500">${item.right.tag}</div>
                            </div>
                        </div>
                    `;
                }

                else if (item.type === 'scoreboard') {
                    uniqueContent = `
                        <div class="grid grid-cols-2 gap-4 h-full">
                            <div class="bg-green-50 rounded p-3 border border-green-100">
                                <div class="text-xs font-bold text-green-700 mb-2 uppercase">Wins</div>
                                <ul class="text-[10px] list-disc list-inside text-green-900 space-y-1">
                                    ${item.wins.map(w => `<li>${w}</li>`).join('')}
                                </ul>
                            </div>
                             <div class="bg-red-50 rounded p-3 border border-red-100">
                                <div class="text-xs font-bold text-red-700 mb-2 uppercase">Losses</div>
                                <ul class="text-[10px] list-disc list-inside text-red-900 space-y-1">
                                    ${item.losses.map(w => `<li>${w}</li>`).join('')}
                                </ul>
                            </div>
                        </div>
                    `;
                }

                else if (item.type === 'funnel-text') {
                    uniqueContent = `
                        <div class="flex flex-col items-center space-y-1 w-full opacity-80">
                            ${item.stages.map((s, i) => `
                                <div class="bg-news-dark text-white text-xs py-1 px-4 text-center rounded shadow-sm" style="width: ${100 - (i * 25)}%">${s}</div>
                            `).join('')}
                            <div class="text-center mt-2 text-xs">â¬‡ï¸ Process</div>
                        </div>
                    `;
                }

                else if (item.type === 'fishbone-text') {
                    uniqueContent = `
                        <div class="relative flex items-center justify-between h-20 border-b-2 border-news-dark">
                             <div class="absolute right-0 text-xl font-bold bg-white px-2 border border-black z-10">${item.head}</div>
                             <div class="flex-1 flex justify-around items-end h-full pb-1">
                                ${item.bones.map(b => `<div class="text-[10px] text-center w-16 -rotate-45 mb-4 border-l border-black/20 pl-1">${b}</div>`).join('')}
                             </div>
                        </div>
                    `;
                }

                else if (item.type === 'timeline-long' || item.type === 'org-chart' || item.type === 'venn-text' || item.type === 'heatmap-lite' || item.type === 'map-text') {
                    uniqueContent = `
                        <div class="flex items-center justify-center h-full text-center flex-col">
                            <span class="material-symbols-rounded text-4xl text-news-accent/20 mb-2">dashboard</span>
                            <div class="font-bold text-news-dark">${item.title || item.label}</div>
                            <div class="text-xs text-news-dark/60 mt-1 max-w-[80%]">${item.desc}</div>
                            ${item.type === 'map-text' ? '<div class="text-[10px] mt-2 text-blue-600">ğŸ“ Multiple Locations</div>' : ''}
                        </div>
                     `;
                }

                card.innerHTML = headerHtml + uniqueContent + (item.desc ? `<div class="text-[10px] text-news-dark/50 font-medium border-t border-black/5 pt-2 mt-auto w-full text-right italic">${item.desc}</div>` : '');
                container.appendChild(card);
            });
        }

        // Init
        renderArticle();
        renderInlineWidgets();

        // === ARTICLE AUDIO PLAYER ===
        const articleAudio = new Audio('audio/article_original.mp3');
        const articleAudioBar = document.getElementById('article-audio-bar');
        const articlePlayIcon = document.getElementById('article-play-icon');
        const articleProgress = document.getElementById('article-progress');
        const articleTimeDisplay = document.getElementById('article-time');
        const mobileListenBtn = document.getElementById('mobile-listen-btn');

        let audioSpeeds = [0.75, 1, 1.25, 1.5, 2];
        let currentSpeedIdx = 1;

        function formatTime(seconds) {
            const mins = Math.floor(seconds / 60);
            const secs = Math.floor(seconds % 60);
            return `${mins}:${secs.toString().padStart(2, '0')}`;
        }

        function showAudioBar() {
            articleAudioBar.style.transform = 'translateY(0)';
            if (mobileListenBtn) mobileListenBtn.style.display = 'none';
        }

        function hideAudioBar() {
            articleAudio.pause();
            articleAudioBar.style.transform = 'translateY(100%)';
            articlePlayIcon.textContent = 'play_arrow';
            if (mobileListenBtn) mobileListenBtn.style.display = 'flex';
        }

        function toggleArticleAudio() {
            if (articleAudio.paused) {
                articleAudio.play();
                articlePlayIcon.textContent = 'pause';
            } else {
                articleAudio.pause();
                articlePlayIcon.textContent = 'play_arrow';
            }
        }

        function seekArticleAudio(event) {
            const bar = event.currentTarget;
            const rect = bar.getBoundingClientRect();
            const percent = (event.clientX - rect.left) / rect.width;
            articleAudio.currentTime = percent * articleAudio.duration;
        }

        function cycleSpeed() {
            currentSpeedIdx = (currentSpeedIdx + 1) % audioSpeeds.length;
            articleAudio.playbackRate = audioSpeeds[currentSpeedIdx];
            document.getElementById('speed-display').textContent = audioSpeeds[currentSpeedIdx] + 'x';
        }

        articleAudio.addEventListener('timeupdate', () => {
            const percent = (articleAudio.currentTime / articleAudio.duration) * 100;
            articleProgress.style.width = percent + '%';
            articleTimeDisplay.textContent = `${formatTime(articleAudio.currentTime)} / ${formatTime(articleAudio.duration || 0)}`;
        });

        articleAudio.addEventListener('ended', () => {
            articlePlayIcon.textContent = 'play_arrow';
        });

        // Auto-show audio bar on all devices after 1 second
        setTimeout(() => showAudioBar(), 1000);

        // === MOBILE MODAL FUNCTIONS ===
        function showMobileModal(data) {
            const modal = document.getElementById('mobile-modal');
            const translation = document.getElementById('mobile-translation');
            const grammar = document.getElementById('mobile-grammar');
            const vocab = document.getElementById('mobile-vocab');

            // Populate translation
            translation.textContent = data.cn;

            // Populate grammar
            grammar.innerHTML = '';
            if (data.grammar && data.grammar.length > 0) {
                data.grammar.forEach(g => {
                    grammar.innerHTML += `<div class="bg-blue-500/10 p-2 rounded-lg text-sm">
                        <span class="text-blue-400 font-bold">${g.type}:</span>
                        <span class="text-slate-300">${g.text}</span>
                    </div>`;
                });
            } else {
                grammar.innerHTML = '<span class="text-slate-500 text-sm">Simple structure</span>';
            }

            // Populate vocabulary
            vocab.innerHTML = '';
            if (data.vocab && data.vocab.length > 0) {
                data.vocab.forEach(v => {
                    vocab.innerHTML += `<div class="bg-emerald-500/10 p-2 rounded-lg text-sm">
                        <span class="text-emerald-400 font-bold">${v.w}</span>
                        <span class="text-slate-400"> â€” ${v.m}</span>
                    </div>`;
                });
            } else {
                vocab.innerHTML = '<span class="text-slate-500 text-sm">No vocabulary notes</span>';
            }

            // Show modal
            modal.classList.remove('hidden');
            document.body.style.overflow = 'hidden';
        }

        function closeMobileModal() {
            const modal = document.getElementById('mobile-modal');
            modal.classList.add('hidden');
            document.body.style.overflow = '';
            // Stop sentence audio when closing
            if (mobileSentenceAudio) {
                mobileSentenceAudio.pause();
                mobileSentenceAudio = null;
                document.getElementById('mobile-audio-icon').textContent = 'play_arrow';
            }
        }

        // Mobile sentence audio
        let mobileSentenceAudio = null;
        let currentMobileAudioId = null;

        function playMobileSentenceAudio() {
            const icon = document.getElementById('mobile-audio-icon');

            if (mobileSentenceAudio && !mobileSentenceAudio.paused) {
                mobileSentenceAudio.pause();
                icon.textContent = 'play_arrow';
            } else if (currentMobileAudioId) {
                const audioPath = `audio/news_2026/${currentMobileAudioId}.mp3`;
                mobileSentenceAudio = new Audio(audioPath);
                mobileSentenceAudio.play();
                icon.textContent = 'pause';

                mobileSentenceAudio.onended = () => {
                    icon.textContent = 'play_arrow';
                };

                mobileSentenceAudio.onerror = () => {
                    icon.textContent = 'play_arrow';
                    console.log('Audio not found:', audioPath);
                };
            }
        }

    </script>
</body>

</html>